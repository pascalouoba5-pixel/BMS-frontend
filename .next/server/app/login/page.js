(()=>{var e={};e.id=520,e.ids=[520],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},17607:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(20413).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\User\\\\Desktop\\\\Projet du pole Informatique\\\\Dossier d\xe9veloppement\\\\BMS 3\\\\BMS_06_08_25\\\\BMS_06_08_25\\\\BMS\\\\frontend\\\\app\\\\login\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\User\\Desktop\\Projet du pole Informatique\\Dossier d\xe9veloppement\\BMS 3\\BMS_06_08_25\\BMS_06_08_25\\BMS\\frontend\\app\\login\\page.tsx","default")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},37060:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var t=s(5853),o=s(60554),n=s(30708),a=s.n(n),i=s(8067),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(r,l);let d={children:["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,17607)),"C:\\Users\\User\\Desktop\\Projet du pole Informatique\\Dossier d\xe9veloppement\\BMS 3\\BMS_06_08_25\\BMS_06_08_25\\BMS\\frontend\\app\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,97898)),"C:\\Users\\User\\Desktop\\Projet du pole Informatique\\Dossier d\xe9veloppement\\BMS 3\\BMS_06_08_25\\BMS_06_08_25\\BMS\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.bind(s,73706)),"C:\\Users\\User\\Desktop\\Projet du pole Informatique\\Dossier d\xe9veloppement\\BMS 3\\BMS_06_08_25\\BMS_06_08_25\\BMS\\frontend\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,82137,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,48358,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["C:\\Users\\User\\Desktop\\Projet du pole Informatique\\Dossier d\xe9veloppement\\BMS 3\\BMS_06_08_25\\BMS_06_08_25\\BMS\\frontend\\app\\login\\page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},50797:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>u});var t=s(28625),o=s(64996),n=s(11107),a=s(93948),i=s.n(a),l=s(62873),d=s(55006),c=s(81446);function u(){let[e,r]=(0,o.useState)({email:"",password:""}),[s,a]=(0,o.useState)(!1),[u,p]=(0,o.useState)(""),[m,h]=(0,o.useState)(!1),g=(0,n.useRouter)(),{login:x}=(0,c.A)(),f=e=>{r(r=>({...r,[e.target.name]:e.target.value})),p("")},v=async r=>{r.preventDefault(),a(!0),p(""),console.log("\uD83D\uDD10 [Login] Tentative de connexion..."),console.log(`ðŸ“§ [Login] Email: ${e.email}`);try{console.log("\uD83D\uDCE1 [Login] Appel API de connexion...");let r=await l.R2.login({email:e.email,password:e.password});if(console.log("âœ… [Login] R\xe9ponse API re\xe7ue:",{user:r.user?.email,role:r.user?.role,hasToken:!!r.token}),!r.token)throw Error("Aucun token re\xe7u de l'API");console.log("\uD83D\uDD10 [Login] Appel du hook useAuth.login..."),x(r.user,r.token),console.log("âœ… [Login] Connexion r\xe9ussie, redirection..."),g.push("/")}catch(r){console.error("âŒ [Login] Erreur lors de la connexion:",r);let e="Erreur lors de la connexion";r.message&&(e=r.message.includes("Token invalide")?"Erreur d'authentification - Veuillez vous reconnecter":r.message.includes("401")?"Email ou mot de passe incorrect":r.message.includes("NetworkError")?"Erreur de connexion au serveur":r.message),p(e)}finally{a(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center p-4",children:[(0,t.jsx)("div",{className:"absolute top-4 left-4",children:(0,t.jsx)(d.default,{variant:"outline",size:"sm"})}),(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("form",{className:"login-box",onSubmit:v,children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("img",{src:"https://static.readdy.ai/image/36ce116ccdb0d05752a287dd792317ce/3a2cd734c9129790560cc32a9975e166.jfif",alt:"BMS Logo",className:"h-12 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Connexion BMS"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"Acc\xe9dez \xe0 votre espace de gestion"})]}),u&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:u}),(0,t.jsxs)("div",{className:"input-box",children:[(0,t.jsx)("input",{type:"email",name:"email",value:e.email,onChange:f,required:!0,className:"w-full"}),(0,t.jsx)("label",{children:"Email"})]}),(0,t.jsxs)("div",{className:"input-box password-input",children:[(0,t.jsx)("input",{type:m?"text":"password",name:"password",value:e.password,onChange:f,required:!0,className:"w-full pr-12"}),(0,t.jsx)("label",{children:"Mot de passe"}),(0,t.jsx)("button",{type:"button",onClick:()=>{h(!m)},className:"password-toggle-btn","aria-label":m?"Masquer le mot de passe":"Afficher le mot de passe",children:m?(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.878 9.878L3 3m6.878 6.878L21 21"})}):(0,t.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),(0,t.jsx)("div",{className:"forgot-pass",children:(0,t.jsx)(i(),{href:"/forgot-password",className:"text-blue-600 hover:text-blue-800 transition-colors",children:"Mot de passe oubli\xe9 ?"})}),(0,t.jsx)("button",{type:"submit",className:`btn w-full ${s?"opacity-75 cursor-not-allowed":""}`,disabled:s,children:s?(0,t.jsxs)("div",{className:"flex items-center justify-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Connexion..."]}):"Se connecter"}),(0,t.jsxs)("div",{className:"signup-link",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Pas encore de compte ? "}),(0,t.jsx)(i(),{href:"/gestion-comptes",className:"text-blue-600 hover:text-blue-800 font-medium transition-colors",children:"G\xe9rer les comptes"})]}),(0,t.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Comptes de test :"}),(0,t.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Admin:"})," test@bms.com / test123"]}),(0,t.jsxs)("p",{children:[(0,t.jsx)("strong",{children:"Integration:"})," integration@bms.com / integration123"]})]})]})]})})]})}s(78331)},55006:(e,r,s)=>{"use strict";s.d(r,{default:()=>a});var t=s(28625),o=s(93948),n=s.n(o);function a({className:e="",variant:r="default",size:s="md"}){let o=`inline-flex items-center gap-2 font-medium transition-all duration-200 hover:scale-105 ${{default:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow-sm hover:shadow-md",outline:"border-2 border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-600 hover:text-white",icon:"bg-blue-100 text-blue-600 p-2 rounded-lg hover:bg-blue-200"}[r]} ${{sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[s]} ${e}`;return(0,t.jsxs)(n(),{href:"/",className:o,children:[(0,t.jsx)("i",{className:"ri-home-line"}),"icon"!==r&&(0,t.jsx)("span",{children:"Accueil"})]})}},62873:(e,r,s)=>{"use strict";s.d(r,{H2:()=>c,R2:()=>u,sF:()=>p,dR:()=>m,c9:()=>h});var t=function(e){return e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.CRITICAL="CRITICAL",e}({});class o{formatMessage(e){let r=new Date(e.timestamp).toLocaleTimeString(),s=e.context?`[${e.context}]`:"",t=`[${e.level}]`,o=`${r} ${t} ${s} ${e.message}`;return e.data&&(o+=` | Data: ${JSON.stringify(e.data)}`),e.error&&(o+=` | Error: ${e.error.message}`,e.error.stack&&(o+=` | Stack: ${e.error.stack}`)),o}addLog(e){if(this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.isDevelopment){let r=this.formatMessage(e);switch(e.level){case"DEBUG":console.debug(r);break;case"INFO":console.info(r);break;case"WARN":console.warn(r);break;case"ERROR":case"CRITICAL":console.error(r)}}!this.isDevelopment&&e.level>="ERROR"&&this.sendToMonitoring(e)}async sendToMonitoring(e){}debug(e,r,s){this.addLog({level:"DEBUG",message:e,context:r,data:s,timestamp:new Date().toISOString()})}info(e,r,s){this.addLog({level:"INFO",message:e,context:r,data:s,timestamp:new Date().toISOString()})}warn(e,r,s){this.addLog({level:"WARN",message:e,context:r,data:s,timestamp:new Date().toISOString()})}error(e,r,s,t){this.addLog({level:"ERROR",message:e,error:r,context:s,data:t,timestamp:new Date().toISOString()})}critical(e,r,s,t){this.addLog({level:"CRITICAL",message:e,error:r,context:s,data:t,timestamp:new Date().toISOString()})}apiError(e,r,s,t){this.error(`Erreur API sur ${e}`,r,"API",{endpoint:e,status:s?.status,statusText:s?.statusText,url:s?.url,data:t})}dashboardError(e,r,s,t){this.error(`Erreur Dashboard: ${e}`,r,"Dashboard",{operation:e,filters:s,data:t})}authError(e,r,s){this.error(`Erreur Auth: ${e}`,r,"Auth",s)}getRecentLogs(e,r=50){let s=this.logs;return e&&(s=s.filter(r=>r.level===e)),s.slice(-r)}exportLogs(){return JSON.stringify(this.logs,null,2)}clearLogs(){this.logs=[]}getLogStats(){let e={total:this.logs.length,byLevel:{},recentErrors:this.logs.filter(e=>e.level>="ERROR").slice(-10)};return Object.values(t).forEach(r=>{e.byLevel[r]=this.logs.filter(e=>e.level===r).length}),e}constructor(){this.logs=[],this.maxLogs=1e3,this.isDevelopment=!1}}let n=new o,a=(e,r,s)=>n.info(e,r,s),i=(e,r,s)=>n.warn(e,r,s),l=(e,r,s,t)=>n.error(e,r,s,t),d={BASE_URL:"http://localhost:5000",NODE_ENV:"production",APP_NAME:process.env.NEXT_PUBLIC_APP_NAME||"BMS",APP_VERSION:process.env.NEXT_PUBLIC_APP_VERSION||"1.0.0",REQUEST_TIMEOUT:1e4,MAX_RETRIES:3,RETRY_DELAY:1e3}.BASE_URL;a("Configuration: NEXT_PUBLIC_API_URL=http://localhost:5000","API"),a(`URL de base utilis\xe9e: ${d}`,"API");let c=async(e,r={})=>{let s=`${d}${e}`;a(`Appel vers: ${s}`,"API"),a(`Token pr\xe9sent: NON`,"API");let t={headers:{"Content-Type":"application/json",...r.headers},...r};try{let r;a(`Envoi de la requ\xeate vers: ${s}`,"API");let o=await fetch(s,t);if(a(`R\xe9ponse re\xe7ue: ${o.status} ${o.statusText}`,"API"),a(`Headers de r\xe9ponse: ${JSON.stringify(Object.fromEntries(o.headers.entries()))}`,"API"),!o.ok){let r={};try{r=await o.json()}catch(e){i(`Impossible de parser le body d'erreur: ${e instanceof Error?e.message:String(e)}`,"API"),r={error:`Erreur HTTP ${o.status}: ${o.statusText}`}}if(n.apiError(e,Error(`HTTP ${o.status}: ${o.statusText}`),o,{status:o.status,statusText:o.statusText,url:s,errorData:r,headers:Object.fromEntries(o.headers.entries())}),401===o.status)throw n.authError("Token invalide",Error(r.error||"Token expir\xe9 ou invalide"),r),Error("Token invalide - Redirection vers la connexion");let t=r.error||r.message||`Erreur HTTP ${o.status}: ${o.statusText}`;throw Error(t)}try{r=await o.json(),a(`Succ\xe8s: ${e}`,"API",r)}catch(e){throw l(`Erreur lors du parsing de la r\xe9ponse: ${e instanceof Error?e.message:String(e)}`,e instanceof Error?e:Error(String(e)),"API"),Error(`Erreur lors du parsing de la r\xe9ponse: ${e instanceof Error?e.message:String(e)}`)}return r}catch(t){if(n.apiError(e,t instanceof Error?t:Error(String(t)),void 0,{url:s,timestamp:new Date().toISOString()}),(t instanceof Error?t.message:String(t))==="Token invalide - Redirection vers la connexion")throw t;let r=`Erreur lors de la r\xe9cup\xe9ration des donn\xe9es: ${t instanceof Error?t.message:String(t)}`;throw e.includes("/performance/")&&(r="Impossible de charger les donn\xe9es de performance. V\xe9rifiez votre connexion et r\xe9essayez."),l(`Message d'erreur am\xe9lior\xe9: ${r}`,t instanceof Error?t:Error(String(t)),"API"),Error(r)}},u={login:async e=>c("/api/auth/login",{method:"POST",body:JSON.stringify(e)}),logout:async()=>({success:!0,message:"D\xe9connexion r\xe9ussie"}),register:async e=>c("/api/auth/register",{method:"POST",body:JSON.stringify(e)}),verifyToken:async()=>c("/api/auth/verify")},p={getAll:async()=>c("/api/offres"),create:async e=>c("/api/offres",{method:"POST",body:JSON.stringify(e)}),update:async(e,r)=>c(`/api/offres/${e}`,{method:"PUT",body:JSON.stringify(r)}),delete:async e=>c(`/api/offres/${e}`,{method:"DELETE"}),validate:async(e,r)=>c(`/api/offres/${e}/validate`,{method:"PATCH",body:JSON.stringify(r)})},m={getOverview:async(e,r)=>{let s=e&&r?`?startDate=${e}&endDate=${r}`:"";return c(`/api/performance/overview${s}`)},getPoles:async(e,r)=>{let s=e&&r?`?startDate=${e}&endDate=${r}`:"";return c(`/api/performance/poles${s}`)},getPolesDetailed:async(e,r)=>{let s=e&&r?`?startDate=${e}&endDate=${r}`:"";return c(`/api/performance/poles-detailed${s}`)},getTrends:async()=>c("/api/performance/trends"),getCommerciaux:async(e,r)=>{let s=e&&r?`?startDate=${e}&endDate=${r}`:"";return c(`/api/performance/commerciaux${s}`)},getMetrics:async()=>c("/api/performance/metrics")},h={getAll:async e=>c(`/api/scheduled-searches?userId=${e}`),getOptions:async()=>c("/api/scheduled-searches/options"),create:async e=>c("/api/scheduled-searches",{method:"POST",body:JSON.stringify(e)}),update:async e=>c("/api/scheduled-searches",{method:"PUT",body:JSON.stringify(e)}),delete:async e=>c("/api/scheduled-searches",{method:"DELETE",body:JSON.stringify(e)}),getSavedKeywords:async e=>c(`/api/scheduled-searches/saved-keywords?userId=${e}`),saveKeywords:async e=>c("/api/scheduled-searches/saved-keywords",{method:"POST",body:JSON.stringify(e)}),deleteSavedKeywords:async(e,r)=>c(`/api/scheduled-searches/saved-keywords/${e}`,{method:"DELETE",body:JSON.stringify({userId:r})}),getSearchStats:async e=>{let r=e?`?userId=${e}`:"";return c(`/api/scheduled-searches/search-stats${r}`)}}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63880:(e,r,s)=>{Promise.resolve().then(s.bind(s,50797))},77032:(e,r,s)=>{Promise.resolve().then(s.bind(s,17607))},78331:()=>{}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[105,94,227],()=>s(37060));module.exports=t})();