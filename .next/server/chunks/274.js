"use strict";exports.id=274,exports.ids=[274],exports.modules={49421:(e,s,t)=>{t.d(s,{A:()=>a});var r=t(28625);function a({offre:e,showActions:s=!1,onViewOffre:t,onEditOffre:a,onDeleteOffre:i,onDownloadTDR:n,showPoleInfo:l=!1,showModalite:o=!1,showPriority:d=!0,showBudget:c=!0,showDate:m=!0,showStatus:x=!0,showTDR:u=!1,showDescription:h=!0,showDetails:g=!0,showCommentaire:p=!1,showTDRCount:f=!1,tdrCount:y=0,className:b=""}){var N;let j,v=e=>e?new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}):"Non sp\xe9cifi\xe9e";return(0,r.jsx)("div",{className:`bg-white rounded-2xl shadow-xl border border-blue-100 overflow-hidden ${b}`,children:(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[x&&(0,r.jsxs)("span",{className:`px-3 py-1 rounded-full text-sm font-medium border ${(e=>{switch(e){case"approuv\xe9e":return"bg-green-100 text-green-800 border-green-200";case"rejet\xe9e":return"bg-red-100 text-red-800 border-red-200";case"en_attente":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(e.statut||"en_attente")}`,children:[(0,r.jsx)("i",{className:`${"approuv\xe9e"===e.statut?"ri-check-line":"rejet\xe9e"===e.statut?"ri-close-line":"ri-time-line"} mr-1`}),(e=>{switch(e){case"approuv\xe9e":return"Approuv\xe9e";case"rejet\xe9e":return"Rejet\xe9e";case"en_attente":default:return"En attente";case"brouillon":return"Brouillon"}})(e.statut||"en_attente")]}),d&&e.priorite&&(0,r.jsx)("span",{className:"bg-orange-100 text-orange-800 px-3 py-1 rounded-full text-sm font-medium",children:e.priorite}),o&&e.modalite&&(0,r.jsx)("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"gagn\xe9":return"bg-green-100 text-green-800";case"d\xe9pos\xe9e":return"bg-blue-100 text-blue-800";case"mont\xe9e":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}})(e.modalite)}`,children:e.modalite}),l&&e.poleLead&&(0,r.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm font-medium",children:[(0,r.jsx)("i",{className:"ri-building-line mr-1"}),e.poleLead]}),f&&y>0&&(0,r.jsxs)("span",{className:"bg-purple-100 text-purple-800 px-3 py-1 rounded-full text-sm font-medium",children:[(0,r.jsx)("i",{className:"ri-file-list-3-line mr-1"}),y," fichier",y>1?"s":""," TDR"]})]}),(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3",children:e.intituleOffre||e.titre||"Sans titre"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-600 mb-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("i",{className:"ri-building-line"}),(0,r.jsx)("span",{children:e.bailleur||e.client||"Non sp\xe9cifi\xe9"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("i",{className:"ri-price-tag-3-line"}),(0,r.jsx)("span",{children:e.typeOffre||e.secteur||"Non sp\xe9cifi\xe9"})]}),m&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("i",{className:"ri-calendar-line"}),(0,r.jsxs)("span",{children:["Date: ",v(e.dateSoumissionValidation||e.dateCreation||e.dateDepot||"")]})]}),e.dateValidation&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("i",{className:"ri-check-double-line"}),(0,r.jsxs)("span",{children:["Valid\xe9e le: ",v(e.dateValidation)]})]}),l&&e.poleAssocies&&(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("i",{className:"ri-team-line"}),(0,r.jsxs)("span",{children:["P\xf4le associ\xe9: ",e.poleAssocies]})]})]})]}),c&&(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:(j=e.montant||e.budget||"")?j.replace("€"," €"):"Non sp\xe9cifi\xe9"}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:"Budget estim\xe9"})]})]}),h&&(0,r.jsxs)("div",{className:"prose max-w-none mb-8",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Description du Projet"}),(0,r.jsx)("p",{className:"text-gray-600 leading-relaxed",children:e.objectifs||e.description||"Aucune description disponible"})]}),g&&(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations Compl\xe9mentaires"}),(0,r.jsxs)("div",{className:"space-y-3",children:[e.pays&&e.pays.length>0&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Pays: "}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:(N=e.pays)&&0!==N.length?N.join(", "):"Non sp\xe9cifi\xe9"})]}),e.autrePays&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Autre pays: "}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:e.autrePays})]}),e.dureeMission&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Dur\xe9e de mission: "}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:e.dureeMission})]}),e.offreTrouveePar&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Offre trouv\xe9e par: "}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:e.offreTrouveePar})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"D\xe9tails Techniques"}),(0,r.jsxs)("div",{className:"space-y-3",children:[e.profilExpert&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Profil expert: "}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:e.profilExpert})]}),e.nomSite&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Nom du site: "}),(0,r.jsx)("span",{className:"text-sm text-gray-900",children:e.nomSite})]}),u&&(e.lienTDR||e.tdrFile)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"TDR: "}),n?(0,r.jsx)("button",{onClick:()=>n(e),className:"text-sm text-blue-600 hover:text-blue-800",children:"T\xe9l\xe9charger"}):(0,r.jsx)("a",{href:e.lienTDR||e.tdrFile,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-800",children:"Voir les TDR"})]})]})]})]}),p&&e.commentaireValidation&&(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Commentaire de Validation"}),(0,r.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-gray-700",children:e.commentaireValidation})})]}),s&&(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[t&&(0,r.jsxs)("button",{onClick:()=>t(e),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)("i",{className:"ri-eye-line"}),"Voir les D\xe9tails"]}),a&&(0,r.jsxs)("button",{onClick:()=>a(e),className:"bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)("i",{className:"ri-edit-line"}),"Modifier"]}),i&&(0,r.jsxs)("button",{onClick:()=>i(e),className:"bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)("i",{className:"ri-delete-bin-line"}),"Supprimer"]}),n&&(e.lienTDR||e.tdrFile)&&(0,r.jsxs)("button",{onClick:()=>n(e),className:"bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center justify-center gap-2",children:[(0,r.jsx)("i",{className:"ri-download-line"}),"T\xe9l\xe9charger TDR"]})]})]})})}},55006:(e,s,t)=>{t.d(s,{default:()=>n});var r=t(28625),a=t(93948),i=t.n(a);function n({className:e="",variant:s="default",size:t="md"}){let a=`inline-flex items-center gap-2 font-medium transition-all duration-200 hover:scale-105 ${{default:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow-sm hover:shadow-md",outline:"border-2 border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-600 hover:text-white",icon:"bg-blue-100 text-blue-600 p-2 rounded-lg hover:bg-blue-200"}[s]} ${{sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[t]} ${e}`;return(0,r.jsxs)(i(),{href:"/",className:a,children:[(0,r.jsx)("i",{className:"ri-home-line"}),"icon"!==s&&(0,r.jsx)("span",{children:"Accueil"})]})}},62873:(e,s,t)=>{t.d(s,{H2:()=>c,R2:()=>m,sF:()=>x,dR:()=>u,c9:()=>h});var r=function(e){return e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.CRITICAL="CRITICAL",e}({});class a{formatMessage(e){let s=new Date(e.timestamp).toLocaleTimeString(),t=e.context?`[${e.context}]`:"",r=`[${e.level}]`,a=`${s} ${r} ${t} ${e.message}`;return e.data&&(a+=` | Data: ${JSON.stringify(e.data)}`),e.error&&(a+=` | Error: ${e.error.message}`,e.error.stack&&(a+=` | Stack: ${e.error.stack}`)),a}addLog(e){if(this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.isDevelopment){let s=this.formatMessage(e);switch(e.level){case"DEBUG":console.debug(s);break;case"INFO":console.info(s);break;case"WARN":console.warn(s);break;case"ERROR":case"CRITICAL":console.error(s)}}!this.isDevelopment&&e.level>="ERROR"&&this.sendToMonitoring(e)}async sendToMonitoring(e){}debug(e,s,t){this.addLog({level:"DEBUG",message:e,context:s,data:t,timestamp:new Date().toISOString()})}info(e,s,t){this.addLog({level:"INFO",message:e,context:s,data:t,timestamp:new Date().toISOString()})}warn(e,s,t){this.addLog({level:"WARN",message:e,context:s,data:t,timestamp:new Date().toISOString()})}error(e,s,t,r){this.addLog({level:"ERROR",message:e,error:s,context:t,data:r,timestamp:new Date().toISOString()})}critical(e,s,t,r){this.addLog({level:"CRITICAL",message:e,error:s,context:t,data:r,timestamp:new Date().toISOString()})}apiError(e,s,t,r){this.error(`Erreur API sur ${e}`,s,"API",{endpoint:e,status:t?.status,statusText:t?.statusText,url:t?.url,data:r})}dashboardError(e,s,t,r){this.error(`Erreur Dashboard: ${e}`,s,"Dashboard",{operation:e,filters:t,data:r})}authError(e,s,t){this.error(`Erreur Auth: ${e}`,s,"Auth",t)}getRecentLogs(e,s=50){let t=this.logs;return e&&(t=t.filter(s=>s.level===e)),t.slice(-s)}exportLogs(){return JSON.stringify(this.logs,null,2)}clearLogs(){this.logs=[]}getLogStats(){let e={total:this.logs.length,byLevel:{},recentErrors:this.logs.filter(e=>e.level>="ERROR").slice(-10)};return Object.values(r).forEach(s=>{e.byLevel[s]=this.logs.filter(e=>e.level===s).length}),e}constructor(){this.logs=[],this.maxLogs=1e3,this.isDevelopment=!1}}let i=new a,n=(e,s,t)=>i.info(e,s,t),l=(e,s,t)=>i.warn(e,s,t),o=(e,s,t,r)=>i.error(e,s,t,r),d={BASE_URL:"http://localhost:5000",NODE_ENV:"production",APP_NAME:process.env.NEXT_PUBLIC_APP_NAME||"BMS",APP_VERSION:process.env.NEXT_PUBLIC_APP_VERSION||"1.0.0",REQUEST_TIMEOUT:1e4,MAX_RETRIES:3,RETRY_DELAY:1e3}.BASE_URL;n("Configuration: NEXT_PUBLIC_API_URL=http://localhost:5000","API"),n(`URL de base utilis\xe9e: ${d}`,"API");let c=async(e,s={})=>{let t=`${d}${e}`;n(`Appel vers: ${t}`,"API"),n(`Token pr\xe9sent: NON`,"API");let r={headers:{"Content-Type":"application/json",...s.headers},...s};try{let s;n(`Envoi de la requ\xeate vers: ${t}`,"API");let a=await fetch(t,r);if(n(`R\xe9ponse re\xe7ue: ${a.status} ${a.statusText}`,"API"),n(`Headers de r\xe9ponse: ${JSON.stringify(Object.fromEntries(a.headers.entries()))}`,"API"),!a.ok){let s={};try{s=await a.json()}catch(e){l(`Impossible de parser le body d'erreur: ${e instanceof Error?e.message:String(e)}`,"API"),s={error:`Erreur HTTP ${a.status}: ${a.statusText}`}}if(i.apiError(e,Error(`HTTP ${a.status}: ${a.statusText}`),a,{status:a.status,statusText:a.statusText,url:t,errorData:s,headers:Object.fromEntries(a.headers.entries())}),401===a.status)throw i.authError("Token invalide",Error(s.error||"Token expir\xe9 ou invalide"),s),Error("Token invalide - Redirection vers la connexion");let r=s.error||s.message||`Erreur HTTP ${a.status}: ${a.statusText}`;throw Error(r)}try{s=await a.json(),n(`Succ\xe8s: ${e}`,"API",s)}catch(e){throw o(`Erreur lors du parsing de la r\xe9ponse: ${e instanceof Error?e.message:String(e)}`,e instanceof Error?e:Error(String(e)),"API"),Error(`Erreur lors du parsing de la r\xe9ponse: ${e instanceof Error?e.message:String(e)}`)}return s}catch(r){if(i.apiError(e,r instanceof Error?r:Error(String(r)),void 0,{url:t,timestamp:new Date().toISOString()}),(r instanceof Error?r.message:String(r))==="Token invalide - Redirection vers la connexion")throw r;let s=`Erreur lors de la r\xe9cup\xe9ration des donn\xe9es: ${r instanceof Error?r.message:String(r)}`;throw e.includes("/performance/")&&(s="Impossible de charger les donn\xe9es de performance. V\xe9rifiez votre connexion et r\xe9essayez."),o(`Message d'erreur am\xe9lior\xe9: ${s}`,r instanceof Error?r:Error(String(r)),"API"),Error(s)}},m={login:async e=>c("/api/auth/login",{method:"POST",body:JSON.stringify(e)}),logout:async()=>({success:!0,message:"D\xe9connexion r\xe9ussie"}),register:async e=>c("/api/auth/register",{method:"POST",body:JSON.stringify(e)}),verifyToken:async()=>c("/api/auth/verify")},x={getAll:async()=>c("/api/offres"),create:async e=>c("/api/offres",{method:"POST",body:JSON.stringify(e)}),update:async(e,s)=>c(`/api/offres/${e}`,{method:"PUT",body:JSON.stringify(s)}),delete:async e=>c(`/api/offres/${e}`,{method:"DELETE"}),validate:async(e,s)=>c(`/api/offres/${e}/validate`,{method:"PATCH",body:JSON.stringify(s)})},u={getOverview:async(e,s)=>{let t=e&&s?`?startDate=${e}&endDate=${s}`:"";return c(`/api/performance/overview${t}`)},getPoles:async(e,s)=>{let t=e&&s?`?startDate=${e}&endDate=${s}`:"";return c(`/api/performance/poles${t}`)},getPolesDetailed:async(e,s)=>{let t=e&&s?`?startDate=${e}&endDate=${s}`:"";return c(`/api/performance/poles-detailed${t}`)},getTrends:async()=>c("/api/performance/trends"),getCommerciaux:async(e,s)=>{let t=e&&s?`?startDate=${e}&endDate=${s}`:"";return c(`/api/performance/commerciaux${t}`)},getMetrics:async()=>c("/api/performance/metrics")},h={getAll:async e=>c(`/api/scheduled-searches?userId=${e}`),getOptions:async()=>c("/api/scheduled-searches/options"),create:async e=>c("/api/scheduled-searches",{method:"POST",body:JSON.stringify(e)}),update:async e=>c("/api/scheduled-searches",{method:"PUT",body:JSON.stringify(e)}),delete:async e=>c("/api/scheduled-searches",{method:"DELETE",body:JSON.stringify(e)}),getSavedKeywords:async e=>c(`/api/scheduled-searches/saved-keywords?userId=${e}`),saveKeywords:async e=>c("/api/scheduled-searches/saved-keywords",{method:"POST",body:JSON.stringify(e)}),deleteSavedKeywords:async(e,s)=>c(`/api/scheduled-searches/saved-keywords/${e}`,{method:"DELETE",body:JSON.stringify({userId:s})}),getSearchStats:async e=>{let s=e?`?userId=${e}`:"";return c(`/api/scheduled-searches/search-stats${s}`)}}}};