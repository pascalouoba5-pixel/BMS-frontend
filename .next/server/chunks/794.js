"use strict";exports.id=794,exports.ids=[794],exports.modules={47403:(e,t,s)=>{s.d(t,{A:()=>i});var r=s(28625),l=s(64996),a=s(87783);let i=({className:e=""})=>{let{alerts:t,isVisible:s,toggleAlerts:i,closeAlert:n}=(0,a.Z)(),[d,c]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{c(!0)},[]),d&&s&&0!==t.length)?(0,r.jsxs)("div",{className:`fixed top-0 left-0 right-0 z-50 ${e}`,children:[(0,r.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,r.jsx)("button",{onClick:i,className:"bg-gray-800 text-white px-3 py-1 rounded-full text-xs hover:bg-gray-700 transition-colors",title:"Masquer les alertes",children:"✕"})}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white p-4 shadow-lg",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"⚠️"}),(0,r.jsxs)("h3",{className:"font-semibold text-lg",children:["Alertes d'\xe9ch\xe9ances (",t.length,")"]})]}),(0,r.jsxs)("div",{className:"text-sm opacity-90",children:["Derni\xe8re mise \xe0 jour : ",new Date().toLocaleTimeString("fr-FR")]})]}),(0,r.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,r.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg border-l-4 ${e.isExpired?"bg-red-800 border-red-400 animate-pulse":e.isUrgent?"bg-red-600 border-red-300 animate-pulse":"bg-orange-600 border-orange-300"}`,children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"font-semibold",children:e.title}),e.isUrgent&&(0,r.jsx)("span",{className:"bg-red-400 text-red-900 px-2 py-1 rounded-full text-xs font-bold",children:"URGENT"}),e.isExpired&&(0,r.jsx)("span",{className:"bg-red-400 text-red-900 px-2 py-1 rounded-full text-xs font-bold",children:"EXPIR\xc9"})]}),(0,r.jsx)("p",{className:"text-sm opacity-90 mb-1",children:e.message}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,r.jsx)("span",{className:"font-mono bg-black/20 px-2 py-1 rounded",children:e.timeRemaining}),e.offreTitle&&(0,r.jsxs)("span",{className:"opacity-75",children:["Offre: ",e.offreTitle]})]})]}),(0,r.jsx)("button",{onClick:()=>n(e.id),className:"ml-4 text-white/80 hover:text-white transition-colors",title:"Fermer cette alerte",children:"✕"})]},e.id))})]})})]}):null}},87783:(e,t,s)=>{s.d(t,{Z:()=>a});var r=s(64996);let l={montageAlertHours:72,depotAlertHours:24,timezone:"UTC"},a=()=>{let[e,t]=(0,r.useState)([]),[s,a]=(0,r.useState)(l),[i,n]=(0,r.useState)(!0),[d,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c(!0)},[]),(0,r.useEffect)(()=>{if(!d)return;let e=localStorage.getItem("alertSettings");if(e)try{let t=JSON.parse(e);a(t)}catch(e){console.error("Erreur lors du chargement des param\xe8tres d'alerte:",e),a(l),localStorage.setItem("alertSettings",JSON.stringify(l))}else a(l),localStorage.setItem("alertSettings",JSON.stringify(l))},[d]);let o=(0,r.useCallback)(e=>{a(e)},[]),m=(0,r.useCallback)(e=>{let t=new Date,s=e.getTime()-t.getTime();if(s<=0)return"\xc9ch\xe9ance d\xe9pass\xe9e";let r=Math.floor(s/36e5),l=Math.floor(s%36e5/6e4);if(r>24){let e=Math.floor(r/24);return`${e}j ${r%24}h ${l}m`}return`${r}h ${l}m`},[]),x=(0,r.useCallback)((e,t)=>{let s=new Date,r=(e.getTime()-s.getTime())/36e5;return r>0&&r<=t},[]),u=(0,r.useCallback)(e=>{let t=new Date;return e.getTime()<=t.getTime()},[]),f=(0,r.useCallback)(e=>{let t=new Date,s=(e.getTime()-t.getTime())/36e5;return s>0&&s<=2},[]),g=(0,r.useCallback)(()=>{if(d)try{let e=localStorage.getItem("offres");if(!e)return void t([]);let r=JSON.parse(e),l=[];r.forEach(e=>{if(e.delaiTransmissionMontageAdministratif){let t=new Date(e.delaiTransmissionMontageAdministratif);x(t,s.montageAlertHours)&&l.push({id:`montage-${e.id}`,type:f(t)?"error":"warning",title:"Montage Administratif",message:`\xc9ch\xe9ance pour le montage administratif de l'offre "${e.intituleOffre}"`,timeRemaining:m(t),offreId:e.id,offreTitle:e.intituleOffre,isUrgent:f(t),isExpired:u(t)})}if(e.dateDepotPrevu){let t=new Date(e.dateDepotPrevu);x(t,s.depotAlertHours)&&l.push({id:`depot-${e.id}`,type:f(t)?"error":"warning",title:"D\xe9p\xf4t d'Offre",message:`\xc9ch\xe9ance pour le d\xe9p\xf4t de l'offre "${e.intituleOffre}"`,timeRemaining:m(t),offreId:e.id,offreTitle:e.intituleOffre,isUrgent:f(t),isExpired:u(t)})}}),l.sort((e,t)=>e.isUrgent&&!t.isUrgent?-1:!e.isUrgent&&t.isUrgent?1:0),t(l)}catch(e){console.error("Erreur lors de la g\xe9n\xe9ration des alertes:",e),t([])}},[s,m,x,u,f,d]);(0,r.useEffect)(()=>{if(!d)return;g();let e=setInterval(()=>{g()},6e4);return()=>{clearInterval(e)}},[g,d]);let h=(0,r.useCallback)(()=>{n(!i)},[i]);return{alerts:e,settings:s,isVisible:i,saveSettings:o,toggleAlerts:h,closeAlert:(0,r.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),generateAlerts:g}}},90078:(e,t,s)=>{s.d(t,{default:()=>i});var r=s(28625),l=s(64996),a=s(11107);function i({children:e,requiredRole:t,pageName:s}){let[i,n]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!0),o=(0,a.useRouter)();return d?(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full mx-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-900 mb-2",children:"V\xe9rification des permissions..."}),(0,r.jsx)("p",{className:"text-gray-600",children:"Veuillez patienter pendant que nous v\xe9rifions vos acc\xe8s."})]})})}):i?(0,r.jsx)(r.Fragment,{children:e}):(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full mx-4",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("i",{className:"ri-shield-cross-line text-2xl text-red-600"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acc\xe8s Refus\xe9"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Vous n'avez pas les permissions n\xe9cessaires pour acc\xe9der \xe0 cette page."}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("button",{onClick:()=>o.back(),className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors w-full",children:"Retour"}),(0,r.jsx)("button",{onClick:()=>o.push("/"),className:"bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg font-semibold transition-colors w-full",children:"Aller \xe0 l'Accueil"})]})]})})})}s(37442)},96485:(e,t,s)=>{s.d(t,{default:()=>i});var r=s(28625),l=s(40926),a=s(47403);function i({children:e}){return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,r.jsx)(l.A,{}),(0,r.jsxs)("main",{className:"flex-1 overflow-auto md:ml-72 transition-all duration-300",children:[(0,r.jsx)(a.A,{}),(0,r.jsx)("div",{className:"min-h-full",children:e})]})]})}}};