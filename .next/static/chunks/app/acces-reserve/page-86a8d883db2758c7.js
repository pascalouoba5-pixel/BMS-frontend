(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{150:(e,s,t)=>{"use strict";t.d(s,{default:()=>a});var r=t(73365),l=t(59534),i=t.n(l);function a(e){let{className:s="",variant:t="default",size:l="md"}=e,a="".concat("inline-flex items-center gap-2 font-medium transition-all duration-200 hover:scale-105"," ").concat({default:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow-sm hover:shadow-md",outline:"border-2 border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-600 hover:text-white",icon:"bg-blue-100 text-blue-600 p-2 rounded-lg hover:bg-blue-200"}[t]," ").concat({sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[l]," ").concat(s);return(0,r.jsxs)(i(),{href:"/",className:a,children:[(0,r.jsx)("i",{className:"ri-home-line"}),"icon"!==t&&(0,r.jsx)("span",{children:"Accueil"})]})}},10753:(e,s,t)=>{Promise.resolve().then(t.bind(t,59166))},21332:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var r=t(1521);let l=()=>{let[e,s]=(0,r.useState)({token:null,user:null,isAuthenticated:!1,userRole:null});(0,r.useEffect)(()=>{let e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t){let r=JSON.parse(t);s({token:e,user:r,isAuthenticated:!0,userRole:r.role||null})}},[]);let t=(0,r.useCallback)((e,t)=>{localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(t)),s({token:e,user:t,isAuthenticated:!0,userRole:t.role||null})},[]),l=(0,r.useCallback)(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s({token:null,user:null,isAuthenticated:!1,userRole:null})},[]),i=(0,r.useCallback)(e=>{localStorage.setItem("token",e),s(s=>({...s,token:e}))},[]);return{...e,login:t,logout:l,updateToken:i}}},59166:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var r=t(73365),l=t(1521),i=t(21332),a=t(50627),n=t(150),o=t(84857);function d(){let{userRole:e}=(0,i.A)();(0,a.useRouter)();let[s,t]=(0,l.useState)(!1),[d,c]=(0,l.useState)(""),[u,x]=(0,l.useState)(""),[m,f]=(0,l.useState)("30"),[h,g]=(0,l.useState)(!1),[b,p]=(0,l.useState)(""),[j,v]=(0,l.useState)(""),[N,y]=(0,l.useState)(!1),[w,S]=(0,l.useState)("");if("s_admin"!==e&&"admin"!==e)return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-white flex items-center justify-center p-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,r.jsx)("i",{className:"ri-shield-cross-line text-2xl text-red-600"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Acc\xe8s Refus\xe9"}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"Cette page est r\xe9serv\xe9e aux Super Administrateurs et Administrateurs uniquement."}),(0,r.jsx)(n.default,{})]})});let k=async()=>{t(!0),c(""),x("");try{if("tdr"===w){await new Promise(e=>setTimeout(e,2e3));let e=h?"Base TDR nettoy\xe9e avec succ\xe8s pour les documents entre le ".concat(b," et le ").concat(j,"."):"Base TDR nettoy\xe9e avec succ\xe8s pour les documents de plus de ".concat(m," jours.");c(e),x("success")}else"offres"===w&&(await new Promise(e=>setTimeout(e,2e3)),c("Donn\xe9es des offres r\xe9initialis\xe9es avec succ\xe8s."),x("success"))}catch(e){c("Une erreur est survenue lors de l'op\xe9ration."),x("error")}finally{t(!1),y(!1),S("")}};return(0,r.jsx)(o.default,{children:(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-white p-6",children:[(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Acc\xe8s R\xe9serv\xe9"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Fonctions d'administration avanc\xe9es"})]}),(0,r.jsx)(n.default,{})]}),(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-8",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-6 h-6 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5",children:(0,r.jsx)("i",{className:"ri-alert-line text-yellow-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"⚠️ Attention - Op\xe9rations Irr\xe9versibles"}),(0,r.jsxs)("p",{className:"text-yellow-700 mb-3",children:["Les actions disponibles sur cette page sont ",(0,r.jsx)("strong",{children:"irr\xe9versibles"})," et peuvent affecter significativement les donn\xe9es du syst\xe8me. Assurez-vous d'avoir effectu\xe9 une sauvegarde avant de proc\xe9der \xe0 ces op\xe9rations."]}),(0,r.jsxs)("div",{className:"text-sm text-yellow-600",children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Acc\xe8s limit\xe9 :"})," Super Administrateurs et Administrateurs uniquement"]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Recommandation :"})," Effectuez ces op\xe9rations en dehors des heures de pointe"]})]})]})]})}),d&&(0,r.jsx)("div",{className:"mb-6 p-4 rounded-xl border ".concat("success"===u?"bg-green-50 border-green-200 text-green-800":"error"===u?"bg-red-50 border-red-200 text-red-800":"bg-blue-50 border-blue-200 text-blue-800"),children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("i",{className:"".concat("success"===u?"ri-check-line":"error"===u?"ri-error-warning-line":"ri-information-line")}),(0,r.jsx)("span",{children:d})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 mb-8",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-4 mb-6",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("i",{className:"ri-file-clean-line text-2xl text-blue-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Nettoyage Base TDR"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Supprime les documents TDR (Termes de R\xe9f\xe9rence) anciens de la base de donn\xe9es pour optimiser les performances et lib\xe9rer de l'espace de stockage."})]})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"P\xe9riode de conservation"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"P\xe9riode pr\xe9d\xe9finie (jours)"}),(0,r.jsxs)("select",{value:m,onChange:e=>{f(e.target.value),g(!1)},disabled:h,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:text-gray-500",children:[(0,r.jsx)("option",{value:"7",children:"7 jours"}),(0,r.jsx)("option",{value:"15",children:"15 jours"}),(0,r.jsx)("option",{value:"30",children:"30 jours"}),(0,r.jsx)("option",{value:"60",children:"60 jours"}),(0,r.jsx)("option",{value:"90",children:"90 jours"}),(0,r.jsx)("option",{value:"180",children:"180 jours"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"useCustomDates",checked:h,onChange:e=>g(e.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"useCustomDates",className:"text-sm font-medium text-gray-700",children:"Utiliser des dates personnalis\xe9es"})]}),h&&(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-3 p-4 bg-blue-50 rounded-xl border border-blue-200",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de d\xe9but"}),(0,r.jsx)("input",{type:"date",value:b,onChange:e=>p(e.target.value),max:j||void 0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date de fin"}),(0,r.jsx)("input",{type:"date",value:j,onChange:e=>v(e.target.value),min:b||void 0,max:new Date().toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]})]}),(0,r.jsx)("div",{className:"flex items-end",children:(0,r.jsx)("button",{onClick:()=>{if(h&&(!b||!j)){c("Veuillez s\xe9lectionner une date de d\xe9but et une date de fin."),x("error");return}if(h&&b>j){c("La date de d\xe9but ne peut pas \xeatre post\xe9rieure \xe0 la date de fin."),x("error");return}S("tdr"),y(!0)},disabled:s||h&&(!b||!j),className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-xl font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:s&&"tdr"===w?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Nettoyage en cours..."]}):(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("i",{className:"ri-delete-bin-line mr-2"}),"Nettoyer Base TDR"]})})})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"Ce que fait cette op\xe9ration :"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,r.jsxs)("li",{children:["• ",h?"Supprime tous les fichiers TDR entre le ".concat(b," et le ").concat(j):"Supprime tous les fichiers TDR de plus de ".concat(m," jours")]}),(0,r.jsx)("li",{children:"• Met \xe0 jour les r\xe9f\xe9rences dans la base de donn\xe9es"}),(0,r.jsx)("li",{children:"• Lib\xe8re l'espace de stockage correspondant"}),(0,r.jsx)("li",{children:"• G\xe9n\xe8re un rapport de nettoyage"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-4 mb-6",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,r.jsx)("i",{className:"ri-refresh-line text-2xl text-orange-600"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"R\xe9initialisation Donn\xe9es Offres"}),(0,r.jsx)("p",{className:"text-gray-600",children:"R\xe9initialise compl\xe8tement les donn\xe9es des offres. Cette op\xe9ration supprime toutes les offres et leurs donn\xe9es associ\xe9es de la base de donn\xe9es."})]})]}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsx)("button",{onClick:()=>{S("offres"),y(!0)},disabled:s,className:"w-full bg-orange-600 hover:bg-orange-700 disabled:bg-gray-400 text-white px-6 py-4 rounded-xl font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2",children:s&&"offres"===w?(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"R\xe9initialisation en cours..."]}):(0,r.jsxs)("div",{className:"flex items-center justify-center",children:[(0,r.jsx)("i",{className:"ri-delete-bin-6-line mr-2"}),"R\xe9initialiser Toutes les Offres"]})})}),(0,r.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4",children:[(0,r.jsx)("h4",{className:"font-semibold text-orange-800 mb-2",children:"⚠️ ATTENTION - Op\xe9ration Critique :"}),(0,r.jsxs)("ul",{className:"text-sm text-orange-700 space-y-1",children:[(0,r.jsxs)("li",{children:["• Supprime ",(0,r.jsx)("strong",{children:"TOUTES"})," les offres de la base de donn\xe9es"]}),(0,r.jsx)("li",{children:"• Supprime toutes les r\xe9partitions et assignations"}),(0,r.jsx)("li",{children:"• Supprime tous les commentaires et validations"}),(0,r.jsxs)("li",{children:["• Cette action est ",(0,r.jsx)("strong",{children:"IRR\xc9VERSIBLE"})]}),(0,r.jsx)("li",{children:"• Assurez-vous d'avoir effectu\xe9 une sauvegarde compl\xe8te"})]})]})]})]}),N&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full p-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("i",{className:"ri-error-warning-line text-xl text-red-600"})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Confirmation Requise"})]}),(0,r.jsx)("p",{className:"text-gray-600 mb-6",children:"tdr"===w?h?"\xcates-vous s\xfbr de vouloir nettoyer la base TDR pour les documents entre le ".concat(b," et le ").concat(j," ?"):"\xcates-vous s\xfbr de vouloir nettoyer la base TDR pour les documents de plus de ".concat(m," jours ?"):"\xcates-vous ABSOLUMENT s\xfbr de vouloir r\xe9initialiser toutes les donn\xe9es des offres ?"}),"offres"===w&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 mb-6",children:(0,r.jsx)("p",{className:"text-red-700 text-sm font-semibold",children:"⚠️ Cette action supprimera d\xe9finitivement toutes les offres et ne peut pas \xeatre annul\xe9e !"})}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>{y(!1),S("")},className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,r.jsx)("button",{onClick:k,className:"flex-1 px-4 py-2 text-white rounded-xl transition-colors ".concat("offres"===w?"bg-red-600 hover:bg-red-700":"bg-blue-600 hover:bg-blue-700"),children:"Confirmer"})]})]})})]})})}},84857:(e,s,t)=>{"use strict";t.d(s,{default:()=>a});var r=t(73365),l=t(49458),i=t(98809);function a(e){let{children:s}=e;return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,r.jsx)(l.A,{}),(0,r.jsxs)("main",{className:"flex-1 overflow-auto md:ml-72 transition-all duration-300",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("div",{className:"min-h-full",children:s})]})]})}},98809:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var r=t(73365),l=t(1521),i=t(99789);let a=e=>{let{className:s=""}=e,{alerts:t,isVisible:a,toggleAlerts:n,closeAlert:o}=(0,i.Z)(),[d,c]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{c(!0)},[]),d&&a&&0!==t.length)?(0,r.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50 ".concat(s),children:[(0,r.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,r.jsx)("button",{onClick:n,className:"bg-gray-800 text-white px-3 py-1 rounded-full text-xs hover:bg-gray-700 transition-colors",title:"Masquer les alertes",children:"✕"})}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white p-4 shadow-lg",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"⚠️"}),(0,r.jsxs)("h3",{className:"font-semibold text-lg",children:["Alertes d'\xe9ch\xe9ances (",t.length,")"]})]}),(0,r.jsxs)("div",{className:"text-sm opacity-90",children:["Derni\xe8re mise \xe0 jour : ",new Date().toLocaleTimeString("fr-FR")]})]}),(0,r.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border-l-4 ".concat(e.isExpired?"bg-red-800 border-red-400 animate-pulse":e.isUrgent?"bg-red-600 border-red-300 animate-pulse":"bg-orange-600 border-orange-300"),children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"font-semibold",children:e.title}),e.isUrgent&&(0,r.jsx)("span",{className:"bg-red-400 text-red-900 px-2 py-1 rounded-full text-xs font-bold",children:"URGENT"}),e.isExpired&&(0,r.jsx)("span",{className:"bg-red-400 text-red-900 px-2 py-1 rounded-full text-xs font-bold",children:"EXPIR\xc9"})]}),(0,r.jsx)("p",{className:"text-sm opacity-90 mb-1",children:e.message}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,r.jsx)("span",{className:"font-mono bg-black/20 px-2 py-1 rounded",children:e.timeRemaining}),e.offreTitle&&(0,r.jsxs)("span",{className:"opacity-75",children:["Offre: ",e.offreTitle]})]})]}),(0,r.jsx)("button",{onClick:()=>o(e.id),className:"ml-4 text-white/80 hover:text-white transition-colors",title:"Fermer cette alerte",children:"✕"})]},e.id))})]})})]}):null}},99789:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(1521);let l={montageAlertHours:72,depotAlertHours:24,timezone:"UTC"},i=()=>{let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)(l),[a,n]=(0,r.useState)(!0),[o,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d(!0)},[]),(0,r.useEffect)(()=>{if(!o)return;let e=localStorage.getItem("alertSettings");if(e)try{let s=JSON.parse(e);i(s)}catch(e){console.error("Erreur lors du chargement des param\xe8tres d'alerte:",e),i(l),localStorage.setItem("alertSettings",JSON.stringify(l))}else i(l),localStorage.setItem("alertSettings",JSON.stringify(l))},[o]);let c=(0,r.useCallback)(e=>{i(e),localStorage.setItem("alertSettings",JSON.stringify(e))},[]),u=(0,r.useCallback)(e=>{let s=new Date,t=e.getTime()-s.getTime();if(t<=0)return"\xc9ch\xe9ance d\xe9pass\xe9e";let r=Math.floor(t/36e5),l=Math.floor(t%36e5/6e4);if(r>24){let e=Math.floor(r/24);return"".concat(e,"j ").concat(r%24,"h ").concat(l,"m")}return"".concat(r,"h ").concat(l,"m")},[]),x=(0,r.useCallback)((e,s)=>{let t=new Date,r=(e.getTime()-t.getTime())/36e5;return r>0&&r<=s},[]),m=(0,r.useCallback)(e=>{let s=new Date;return e.getTime()<=s.getTime()},[]),f=(0,r.useCallback)(e=>{let s=new Date,t=(e.getTime()-s.getTime())/36e5;return t>0&&t<=2},[]),h=(0,r.useCallback)(()=>{if(o)try{let e=localStorage.getItem("offres");if(!e)return void s([]);let r=JSON.parse(e),l=[];r.forEach(e=>{if(e.delaiTransmissionMontageAdministratif){let s=new Date(e.delaiTransmissionMontageAdministratif);x(s,t.montageAlertHours)&&l.push({id:"montage-".concat(e.id),type:f(s)?"error":"warning",title:"Montage Administratif",message:"\xc9ch\xe9ance pour le montage administratif de l'offre \"".concat(e.intituleOffre,'"'),timeRemaining:u(s),offreId:e.id,offreTitle:e.intituleOffre,isUrgent:f(s),isExpired:m(s)})}if(e.dateDepotPrevu){let s=new Date(e.dateDepotPrevu);x(s,t.depotAlertHours)&&l.push({id:"depot-".concat(e.id),type:f(s)?"error":"warning",title:"D\xe9p\xf4t d'Offre",message:"\xc9ch\xe9ance pour le d\xe9p\xf4t de l'offre \"".concat(e.intituleOffre,'"'),timeRemaining:u(s),offreId:e.id,offreTitle:e.intituleOffre,isUrgent:f(s),isExpired:m(s)})}}),l.sort((e,s)=>e.isUrgent&&!s.isUrgent?-1:!e.isUrgent&&s.isUrgent?1:0),s(l)}catch(e){console.error("Erreur lors de la g\xe9n\xe9ration des alertes:",e),s([])}},[t,u,x,m,f,o]);(0,r.useEffect)(()=>{if(!o)return;h();let e=setInterval(()=>{h()},6e4),s=()=>{h()},t=e=>{("offres"===e.key||"alertSettings"===e.key)&&h()};return window.addEventListener("alertSettingsChanged",s),window.addEventListener("storage",t),()=>{clearInterval(e),window.removeEventListener("alertSettingsChanged",s),window.removeEventListener("storage",t)}},[h,o]);let g=(0,r.useCallback)(()=>{n(!a)},[a]);return{alerts:e,settings:t,isVisible:a,saveSettings:c,toggleAlerts:g,closeAlert:(0,r.useCallback)(e=>{s(s=>s.filter(s=>s.id!==e))},[]),generateAlerts:h}}}},e=>{var s=s=>e(e.s=s);e.O(0,[255,458,347,870,358],()=>s(10753)),_N_E=e.O()}]);