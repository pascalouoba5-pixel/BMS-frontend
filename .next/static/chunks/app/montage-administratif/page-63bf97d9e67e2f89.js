(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[170],{150:(e,s,t)=>{"use strict";t.d(s,{default:()=>i});var a=t(73365),r=t(59534),l=t.n(r);function i(e){let{className:s="",variant:t="default",size:r="md"}=e,i="".concat("inline-flex items-center gap-2 font-medium transition-all duration-200 hover:scale-105"," ").concat({default:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow-sm hover:shadow-md",outline:"border-2 border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-600 hover:text-white",icon:"bg-blue-100 text-blue-600 p-2 rounded-lg hover:bg-blue-200"}[t]," ").concat({sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[r]," ").concat(s);return(0,a.jsxs)(l(),{href:"/",className:i,children:[(0,a.jsx)("i",{className:"ri-home-line"}),"icon"!==t&&(0,a.jsx)("span",{children:"Accueil"})]})}},30655:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(73365),r=t(1521),l=t(150),i=t(99789);let n=e=>{let{className:s=""}=e,{settings:t,saveSettings:l}=(0,i.Z)(),[n,c]=(0,r.useState)(!1),[d,o]=(0,r.useState)(t);r.useEffect(()=>{o(t)},[t]);let x=()=>{o(t),c(!1)};return(0,a.jsxs)("div",{className:s,children:[(0,a.jsxs)("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center space-x-2",children:[(0,a.jsx)("i",{className:"ri-settings-3-line"}),(0,a.jsx)("span",{children:"Param\xe8tres d'alertes"})]}),n&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Param\xe8tres des Alertes"}),(0,a.jsx)("button",{onClick:x,className:"text-gray-400 hover:text-gray-600",children:(0,a.jsx)("i",{className:"ri-close-line text-xl"})})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alerte montage administratif"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"number",min:"1",max:"168",value:d.montageAlertHours,onChange:e=>o(s=>({...s,montageAlertHours:parseInt(e.target.value)||72})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"heures avant"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Actuellement : ",t.montageAlertHours,"h avant l'\xe9ch\xe9ance"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alerte d\xe9p\xf4t"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("input",{type:"number",min:"1",max:"168",value:d.depotAlertHours,onChange:e=>o(s=>({...s,depotAlertHours:parseInt(e.target.value)||24})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"heures avant"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Actuellement : ",t.depotAlertHours,"h avant l'\xe9ch\xe9ance"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fuseau horaire"}),(0,a.jsxs)("select",{value:d.timezone,onChange:e=>o(s=>({...s,timezone:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"UTC",children:"UTC (UTC+0)"}),(0,a.jsx)("option",{value:"Europe/Paris",children:"Europe/Paris (UTC+1/+2)"}),(0,a.jsx)("option",{value:"America/New_York",children:"America/New_York (UTC-5/-4)"}),(0,a.jsx)("option",{value:"Asia/Tokyo",children:"Asia/Tokyo (UTC+9)"})]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Actuellement : ",t.timezone]})]}),(0,a.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,a.jsx)("i",{className:"ri-information-line text-blue-500 mt-0.5"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,a.jsx)("p",{className:"font-medium mb-1",children:"Informations :"}),(0,a.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,a.jsx)("li",{children:"• Les alertes se mettent \xe0 jour automatiquement chaque minute"}),(0,a.jsx)("li",{children:"• Les alertes urgentes (≤1h) clignotent en rouge"}),(0,a.jsx)("li",{children:"• Les \xe9ch\xe9ances d\xe9pass\xe9es s'affichent en rouge clignotant"}),(0,a.jsx)("li",{children:"• Les param\xe8tres sont sauvegard\xe9s localement"})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-6",children:[(0,a.jsx)("button",{onClick:()=>{o({montageAlertHours:72,depotAlertHours:24,timezone:"UTC"})},className:"text-gray-600 hover:text-gray-800 text-sm",children:"R\xe9initialiser"}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:x,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Annuler"}),(0,a.jsx)("button",{onClick:()=>{l(d),setTimeout(()=>{window.dispatchEvent(new CustomEvent("alertSettingsChanged"))},100),c(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Sauvegarder"})]})]})]})})]})};var c=t(42770),d=t(84857),o=t(98809);function x(){return(0,a.jsx)(c.default,{pageName:"montage-administratif",children:(0,a.jsx)(d.default,{children:(0,a.jsx)(m,{})})})}function m(){let[e,s]=(0,r.useState)([]),[t,i]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[x,m]=(0,r.useState)(""),[u,g]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[b,f]=(0,r.useState)(""),[j,N]=(0,r.useState)("dateDepot"),[y,v]=(0,r.useState)("desc"),[w,k]=(0,r.useState)("table"),[A,C]=(0,r.useState)(!1),[S,T]=(0,r.useState)(!1),[D,M]=(0,r.useState)(null),[L,P]=(0,r.useState)({montageAdministratif:"",chargeMontageAdministratif:"",delaiTransmissionMontageAdministratif:"",dateTransmissionAssuranceQualite:"",chargeAssuranceQualite:"",diligencesMenees:""});(0,r.useEffect)(()=>{E()},[]),(0,r.useEffect)(()=>{O()},[e,x,u,h,b,j,y]);let E=()=>{d(!0);try{let e=localStorage.getItem("offres");if(e){let t=JSON.parse(e).filter(e=>"approuv\xe9e"===e.statut);s(t)}}catch(e){console.error("Erreur lors du chargement des offres:",e)}finally{d(!1)}},O=()=>{let s=[...e];x&&(s=s.filter(e=>{let s=x.toLowerCase(),t=(e.intituleOffre||e.titre||"").toLowerCase(),a=(e.bailleur||e.client||"").toLowerCase(),r=(e.poleLead||"").toLowerCase();return t.includes(s)||a.includes(s)||r.includes(s)})),u&&(s=s.filter(e=>e.pays&&Array.isArray(e.pays)&&e.pays.includes(u))),h&&(s=s.filter(e=>e.priorite===h)),b&&(s=s.filter(e=>e.poleLead===b)),s.sort((e,s)=>{let t="",a="";switch(j){case"intituleOffre":t=(e.intituleOffre||e.titre||"").toLowerCase(),a=(s.intituleOffre||s.titre||"").toLowerCase();break;case"bailleur":t=(e.bailleur||e.client||"").toLowerCase(),a=(s.bailleur||s.client||"").toLowerCase();break;case"priorite":t=e.priorite||"",a=s.priorite||"";break;case"poleLead":t=e.poleLead||"",a=s.poleLead||"";break;default:t=e.dateDepot||"",a=s.dateDepot||""}return"asc"===y?t>a?1:-1:t<a?1:-1}),i(s)},I=e=>{j===e?v("asc"===y?"desc":"asc"):(N(e),v("desc"))},Q=e=>{M(e),C(!0)},q=e=>{M(e),P({montageAdministratif:e.montageAdministratif||"",chargeMontageAdministratif:e.chargeMontageAdministratif||"",delaiTransmissionMontageAdministratif:H(e.delaiTransmissionMontageAdministratif),dateTransmissionAssuranceQualite:H(e.dateTransmissionAssuranceQualite),chargeAssuranceQualite:e.chargeAssuranceQualite||"",diligencesMenees:e.diligencesMenees||""}),T(!0)},_=(e,s)=>{P(t=>({...t,[e]:s}))},R=e=>{if(!e.tdrFile&&!e.lienTDR)return void alert("Aucun fichier TDR disponible pour cette offre.");let s=e.tdrFile||e.lienTDR;if(s){let t=document.createElement("a");t.href=s,t.download="TDR_".concat(e.intituleOffre||e.titre||e.id,".pdf"),t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},z=e=>{if(!e)return"Non sp\xe9cifi\xe9e";try{return new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(e){return"Date invalide"}},H=e=>{if(!e)return"";try{return new Date(e).toISOString().split("T")[0]}catch(e){return""}},U=e=>{switch(e){case"Priorit\xe9 haute":return"bg-red-100 text-red-800 border-red-200";case"Strat\xe9gique":return"bg-purple-100 text-purple-800 border-purple-200";case"Opportunit\xe9 interm\xe9diaire":return"bg-yellow-100 text-yellow-800 border-yellow-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},F=e=>e&&0!==e.length?1===e.length?e[0]:e.length<=2?e.join(", "):"".concat(e[0],", ").concat(e[1]," +").concat(e.length-2):"Non sp\xe9cifi\xe9",V=e=>({"P\xf4le sant\xe9":"bg-green-100 text-green-800 border-green-200","P\xf4le Wash":"bg-blue-100 text-blue-800 border-blue-200","P\xf4le Education":"bg-purple-100 text-purple-800 border-purple-200","P\xf4le Climat":"bg-emerald-100 text-emerald-800 border-emerald-200","P\xf4le Enqu\xeates":"bg-orange-100 text-orange-800 border-orange-200","P\xf4le Mod\xe9lisation":"bg-indigo-100 text-indigo-800 border-indigo-200","P\xf4le Finances Publiques":"bg-pink-100 text-pink-800 border-pink-200","P\xf4le D\xe9centralisation":"bg-teal-100 text-teal-800 border-teal-200","P\xf4le Coh\xe9sion sociale":"bg-cyan-100 text-cyan-800 border-cyan-200","P\xf4le Anglophone":"bg-amber-100 text-amber-800 border-amber-200","P\xf4le SIDIA":"bg-violet-100 text-violet-800 border-violet-200"})[e]||"bg-gray-100 text-gray-800 border-gray-200";return c?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Chargement des offres approuv\xe9es..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white",children:[(0,a.jsx)(o.A,{}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 py-12",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l.default,{}),(0,a.jsxs)("div",{className:"ml-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-500/30 backdrop-blur-sm rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("i",{className:"ri-settings-3-line text-2xl text-white"})}),(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Montage Administratif"}),(0,a.jsx)("p",{className:"text-xl opacity-90",children:"Gestion administrative des offres approuv\xe9es"})]})]}),(0,a.jsxs)("div",{className:"text-right text-white",children:[(0,a.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-4 py-2 mb-4",children:(0,a.jsxs)("span",{className:"text-lg",children:[t.length," offres approuv\xe9es"]})}),(0,a.jsx)(n,{})]})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-blue-100 p-6 mb-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recherche"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Rechercher par titre, bailleur, p\xf4le...",value:x,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pays"}),(0,a.jsxs)("select",{value:u,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Tous les pays"}),(s=>{let t=new Set;return e.forEach(e=>{let a=e[s];a&&(Array.isArray(a)?a.forEach(e=>t.add(e)):t.add(String(a)))}),Array.from(t).sort()})("pays").map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Priorit\xe9"}),(0,a.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"Toutes les priorit\xe9s"}),(0,a.jsx)("option",{value:"Priorit\xe9 haute",children:"Priorit\xe9 haute"}),(0,a.jsx)("option",{value:"Strat\xe9gique",children:"Strat\xe9gique"}),(0,a.jsx)("option",{value:"Opportunit\xe9 interm\xe9diaire",children:"Opportunit\xe9 interm\xe9diaire"})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[t.length," offres approuv\xe9es trouv\xe9es"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>k("table"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("table"===w?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,a.jsx)("i",{className:"ri-table-line mr-2"}),"Tableau"]}),(0,a.jsxs)("button",{onClick:()=>k("cards"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("cards"===w?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,a.jsx)("i",{className:"ri-grid-line mr-2"}),"Cartes"]}),(0,a.jsxs)("button",{onClick:()=>{alert("Fonctionnalit\xe9 d'export Excel \xe0 impl\xe9menter")},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[(0,a.jsx)("i",{className:"ri-download-line"}),"Exporter Excel"]})]})]})]}),"table"===w&&(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-blue-100 overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gradient-to-r from-blue-50 to-blue-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-blue-700 uppercase tracking-wider cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>I("intituleOffre"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"ri-file-text-line"}),"Intitul\xe9","intituleOffre"===j&&(0,a.jsx)("i",{className:"ri-arrow-".concat("asc"===y?"up":"down","-line")})]})}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-blue-700 uppercase tracking-wider cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>I("bailleur"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"ri-building-line"}),"Bailleur","bailleur"===j&&(0,a.jsx)("i",{className:"ri-arrow-".concat("asc"===y?"up":"down","-line")})]})}),(0,a.jsxs)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-blue-700 uppercase tracking-wider",children:[(0,a.jsx)("i",{className:"ri-map-pin-line mr-2"}),"Pays"]}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-blue-700 uppercase tracking-wider cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>I("priorite"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"ri-flag-line"}),"Priorit\xe9","priorite"===j&&(0,a.jsx)("i",{className:"ri-arrow-".concat("asc"===y?"up":"down","-line")})]})}),(0,a.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-blue-700 uppercase tracking-wider cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>I("poleLead"),children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"ri-team-line"}),"P\xf4le LEAD","poleLead"===j&&(0,a.jsx)("i",{className:"ri-arrow-".concat("asc"===y?"up":"down","-line")})]})}),(0,a.jsxs)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-blue-700 uppercase tracking-wider",children:[(0,a.jsx)("i",{className:"ri-settings-3-line mr-2"}),"Montage Admin"]}),(0,a.jsxs)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-blue-700 uppercase tracking-wider",children:[(0,a.jsx)("i",{className:"ri-settings-3-line mr-2"}),"Actions"]})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:0===t.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-12 text-center text-gray-500",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsx)("i",{className:"ri-inbox-line text-4xl mb-4 text-gray-300"}),(0,a.jsx)("p",{className:"text-lg font-medium",children:"Aucune offre approuv\xe9e trouv\xe9e"}),(0,a.jsx)("p",{className:"text-sm",children:"Essayez de modifier vos filtres de recherche"})]})})}):t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-blue-50 transition-colors duration-200",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900 max-w-xs truncate",children:e.intituleOffre||e.titre||"Sans titre"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.bailleur||e.client||"Non sp\xe9cifi\xe9"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:F(e.pays)})}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.priorite?(0,a.jsx)("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full border ".concat(U(e.priorite)),children:e.priorite}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Aucune"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:e.poleLead?(0,a.jsx)("span",{className:"inline-flex px-3 py-1 text-xs font-semibold rounded-full border ".concat(V(e.poleLead)),children:e.poleLead}):(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Non sp\xe9cifi\xe9"})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("div",{className:"text-sm text-gray-900",children:e.montageAdministratif?(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-green-600 font-medium",children:"✓ Configur\xe9"}),e.delaiTransmissionMontageAdministratif&&(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["D\xe9lai: ",z(e.delaiTransmissionMontageAdministratif)]})]}):(0,a.jsx)("span",{className:"text-gray-500",children:"Non configur\xe9"})})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>R(e),className:"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors",title:"T\xe9l\xe9charger TDR",children:(0,a.jsx)("i",{className:"ri-download-line"})}),(0,a.jsx)("button",{onClick:()=>Q(e),className:"bg-green-600 text-white p-2 rounded-lg hover:bg-green-700 transition-colors",title:"Voir les d\xe9tails",children:(0,a.jsx)("i",{className:"ri-eye-line"})}),(0,a.jsx)("button",{onClick:()=>q(e),className:"bg-orange-600 text-white p-2 rounded-lg hover:bg-orange-700 transition-colors",title:"Modifier le montage administratif",children:(0,a.jsx)("i",{className:"ri-edit-line"})})]})})]},e.id))})]})})}),"cards"===w&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:0===t.length?(0,a.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,a.jsx)("i",{className:"ri-inbox-line text-4xl text-gray-300 mb-4"}),(0,a.jsx)("p",{className:"text-lg font-medium text-gray-500",children:"Aucune offre approuv\xe9e trouv\xe9e"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Essayez de modifier vos filtres de recherche"})]}):t.map(e=>(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-blue-100 hover:shadow-xl transition-all duration-300 overflow-hidden",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 line-clamp-2 mb-2",children:e.intituleOffre||e.titre||"Sans titre"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.bailleur||e.client||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>R(e),className:"bg-blue-100 text-blue-600 p-2 rounded-lg hover:bg-blue-200 transition-colors",title:"T\xe9l\xe9charger TDR",children:(0,a.jsx)("i",{className:"ri-download-line"})}),(0,a.jsx)("button",{onClick:()=>Q(e),className:"bg-green-100 text-green-600 p-2 rounded-lg hover:bg-green-200 transition-colors",title:"Voir les d\xe9tails",children:(0,a.jsx)("i",{className:"ri-eye-line"})}),(0,a.jsx)("button",{onClick:()=>q(e),className:"bg-orange-100 text-orange-600 p-2 rounded-lg hover:bg-orange-200 transition-colors",title:"Modifier le montage administratif",children:(0,a.jsx)("i",{className:"ri-edit-line"})})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.priorite&&(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full border ".concat(U(e.priorite)),children:e.priorite}),e.poleLead&&(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full border ".concat(V(e.poleLead)),children:e.poleLead})]}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"ri-map-pin-line text-gray-400"}),(0,a.jsx)("span",{children:F(e.pays)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"ri-settings-3-line text-gray-400"}),(0,a.jsx)("span",{children:e.montageAdministratif?"✓ Configur\xe9":"Non configur\xe9"})]}),e.delaiTransmissionMontageAdministratif&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"ri-calendar-line text-gray-400"}),(0,a.jsxs)("span",{className:"text-xs",children:["D\xe9lai: ",z(e.delaiTransmissionMontageAdministratif)]})]}),e.dateDepot&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("i",{className:"ri-calendar-line text-gray-400"}),(0,a.jsx)("span",{children:z(e.dateDepot)})]})]})]})},e.id))})]}),A&&D&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:["D\xe9tails de l'offre : ",D.intituleOffre||D.titre||"Sans titre"]}),(0,a.jsx)("button",{onClick:()=>C(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("i",{className:"ri-close-line text-2xl"})})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations g\xe9n\xe9rales"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Intitul\xe9"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.intituleOffre||D.titre||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bailleur/Client"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.bailleur||D.client||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pays"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:F(D.pays)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Type d'offre"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.typeOffre||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Priorit\xe9"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.priorite||"Non sp\xe9cifi\xe9e"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Statut"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.statut?D.statut.replace("_"," "):"Non sp\xe9cifi\xe9"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informations de r\xe9partition"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"P\xf4le LEAD"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.poleLead||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"P\xf4le ASSOCI\xc9S"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.poleAssocies||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date d'imputation"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:z(D.dateImputation)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Charge Assurance Qualit\xe9"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.chargeAssuranceQualite||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Charge Montage Administratif"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.chargeMontageAdministratif||"Non sp\xe9cifi\xe9"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Montage administratif"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Montage administratif"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.montageAdministratif||"Non configur\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"D\xe9lai transmission montage administratif"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:z(D.delaiTransmissionMontageAdministratif)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date transmission assurance qualit\xe9"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:z(D.dateTransmissionAssuranceQualite)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Diligences men\xe9es"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:D.diligencesMenees||"Non sp\xe9cifi\xe9"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dates importantes"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date de d\xe9p\xf4t"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:z(D.dateDepot)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date de soumission/validation"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:z(D.dateSoumissionValidation)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date de validation"}),(0,a.jsx)("p",{className:"text-sm text-gray-900",children:z(D.dateValidation)})]})]})]})]})})]})}),S&&D&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Modifier le montage administratif"}),(0,a.jsx)("button",{onClick:()=>T(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("i",{className:"ri-close-line text-2xl"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montage administratif"}),(0,a.jsx)("textarea",{value:L.montageAdministratif,onChange:e=>_("montageAdministratif",e.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"D\xe9tails du montage administratif..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Charg\xe9 montage administratif"}),(0,a.jsx)("input",{type:"text",value:L.chargeMontageAdministratif,onChange:e=>_("chargeMontageAdministratif",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nom du charg\xe9 montage administratif"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"D\xe9lai transmission montage administratif"}),(0,a.jsx)("input",{type:"date",value:L.delaiTransmissionMontageAdministratif,onChange:e=>_("delaiTransmissionMontageAdministratif",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Charg\xe9 assurance qualit\xe9"}),(0,a.jsx)("input",{type:"text",value:L.chargeAssuranceQualite,onChange:e=>_("chargeAssuranceQualite",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nom du charg\xe9 assurance qualit\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date transmission assurance qualit\xe9"}),(0,a.jsx)("input",{type:"date",value:L.dateTransmissionAssuranceQualite,onChange:e=>_("dateTransmissionAssuranceQualite",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diligences men\xe9es"}),(0,a.jsx)("textarea",{value:L.diligencesMenees,onChange:e=>_("diligencesMenees",e.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"D\xe9tails des diligences men\xe9es..."})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>T(!1),className:"px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Annuler"}),(0,a.jsx)("button",{onClick:()=>{if(!D)return;let e={...D,...L},t=localStorage.getItem("offres");if(t){let a=JSON.parse(t).map(s=>s.id===D.id?e:s);localStorage.setItem("offres",JSON.stringify(a)),s(s=>s.map(s=>s.id===D.id?e:s)),E(),window.dispatchEvent(new CustomEvent("offresUpdated",{detail:{updatedOffre:e}})),alert("Montage administratif mis \xe0 jour avec succ\xe8s ! Les donn\xe9es ont \xe9t\xe9 actualis\xe9es sur les tableaux de r\xe9partition."),T(!1),M(null)}},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Sauvegarder"})]})]})]})})]})}},74261:(e,s,t)=>{Promise.resolve().then(t.bind(t,30655))}},e=>{var s=s=>e(e.s=s);e.O(0,[255,458,530,347,870,358],()=>s(74261)),_N_E=e.O()}]);