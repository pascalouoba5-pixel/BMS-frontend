(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{17008:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var l=r(73365),s=r(1521),u=r(50627),n=r(21332);function a(){let e=(0,u.useRouter)(),{logout:t}=(0,n.A)();return(0,s.useEffect)(()=>{let r=!0;return(async()=>{try{r&&(await t(),e.push("/"))}catch(t){console.error("Erreur lors de la d\xe9connexion:",t),r&&e.push("/")}})(),()=>{r=!1}},[e]),(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,l.jsx)("p",{className:"mt-4 text-gray-600",children:"D\xe9connexion en cours..."})]})})}},21332:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var l=r(1521);let s=()=>{let[e,t]=(0,l.useState)({token:null,user:null,isAuthenticated:!1,userRole:null});(0,l.useEffect)(()=>{let e=localStorage.getItem("token"),r=localStorage.getItem("user");if(e&&r){let l=JSON.parse(r);t({token:e,user:l,isAuthenticated:!0,userRole:l.role||null})}},[]);let r=(0,l.useCallback)((e,r)=>{localStorage.setItem("token",e),localStorage.setItem("user",JSON.stringify(r)),t({token:e,user:r,isAuthenticated:!0,userRole:r.role||null})},[]),s=(0,l.useCallback)(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),t({token:null,user:null,isAuthenticated:!1,userRole:null})},[]),u=(0,l.useCallback)(e=>{localStorage.setItem("token",e),t(t=>({...t,token:e}))},[]);return{...e,login:r,logout:s,updateToken:u}}},40887:(e,t,r)=>{Promise.resolve().then(r.bind(r,17008))},50627:(e,t,r)=>{"use strict";var l=r(47192);r.o(l,"usePathname")&&r.d(t,{usePathname:function(){return l.usePathname}}),r.o(l,"useRouter")&&r.d(t,{useRouter:function(){return l.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[347,870,358],()=>t(40887)),_N_E=e.O()}]);