(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{150:(e,s,t)=>{"use strict";t.d(s,{default:()=>r});var a=t(73365),i=t(59534),l=t.n(i);function r(e){let{className:s="",variant:t="default",size:i="md"}=e,r="".concat("inline-flex items-center gap-2 font-medium transition-all duration-200 hover:scale-105"," ").concat({default:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow-sm hover:shadow-md",outline:"border-2 border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-600 hover:text-white",icon:"bg-blue-100 text-blue-600 p-2 rounded-lg hover:bg-blue-200"}[t]," ").concat({sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[i]," ").concat(s);return(0,a.jsxs)(l(),{href:"/",className:r,children:[(0,a.jsx)("i",{className:"ri-home-line"}),"icon"!==t&&(0,a.jsx)("span",{children:"Accueil"})]})}},59799:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(73365),i=t(1521),l=t(150),r=t(42770),n=t(84857),d=t(15368);function c(){return(0,a.jsx)(r.default,{pageName:"offres-validees",children:(0,a.jsx)(n.default,{children:(0,a.jsx)(o,{})})})}function o(){let[e,s]=(0,i.useState)([]),[t,r]=(0,i.useState)(!0),[n,c]=(0,i.useState)(""),[o,x]=(0,i.useState)(null),[m,h]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1),[u,b]=(0,i.useState)({montageAdministratif:""}),[p,j]=(0,i.useState)({total:0,approuvees:0}),[N,y]=(0,i.useState)("table");(0,i.useEffect)(()=>{w();let e=setInterval(w,3e4),s=e=>{"offres"===e.key&&w()};return window.addEventListener("storage",s),()=>{clearInterval(e),window.removeEventListener("storage",s)}},[]);let v=e=>({total:e.length,approuvees:e.filter(e=>"approuv\xe9e"===e.statut).length}),w=async()=>{r(!0);try{let e=JSON.parse(localStorage.getItem("offres")||"[]").filter(e=>"approuv\xe9e"===e.statut);s(e);let t=v(e);j(t)}catch(e){c(e.message||"Erreur lors du chargement des offres")}finally{r(!1)}},D=(e,s)=>{b(t=>({...t,[e]:s}))};return t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Chargement des offres valid\xe9es..."})]})}):n?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:[(0,a.jsx)("p",{className:"font-semibold",children:"Erreur"}),(0,a.jsx)("p",{children:n})]})})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 py-12",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(l.default,{}),(0,a.jsxs)("div",{className:"ml-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-500/30 backdrop-blur-sm rounded-full flex items-center justify-center mb-4",children:(0,a.jsx)("i",{className:"ri-check-double-line text-2xl text-white"})}),(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"Offres Valid\xe9es"}),(0,a.jsx)("p",{className:"text-xl opacity-90",children:"Gestion des offres approuv\xe9es"})]})]}),(0,a.jsx)("div",{className:"text-right text-white",children:(0,a.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-4 py-2",children:(0,a.jsxs)("span",{className:"text-lg",children:[e.length," offres valid\xe9es"]})})})]})})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-blue-100 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"bg-green-500 text-white p-3 rounded-lg",children:(0,a.jsx)("i",{className:"ri-check-line text-xl"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total des offres valid\xe9es"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p.total})]})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-blue-100 p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"bg-blue-500 text-white p-3 rounded-lg",children:(0,a.jsx)("i",{className:"ri-file-list-line text-xl"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Offres approuv\xe9es"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:p.approuvees})]})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-blue-100 p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[(0,a.jsx)("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.length," offres valid\xe9es trouv\xe9es"]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)("button",{onClick:()=>y("table"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("table"===N?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,a.jsx)("i",{className:"ri-table-line mr-2"}),"Tableau"]}),(0,a.jsxs)("button",{onClick:()=>y("cards"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat("cards"===N?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,a.jsx)("i",{className:"ri-grid-line mr-2"}),"Cartes"]}),(0,a.jsxs)("button",{onClick:()=>{alert("Fonctionnalit\xe9 d'export Excel \xe0 impl\xe9menter")},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[(0,a.jsx)("i",{className:"ri-download-line"}),"Exporter Excel"]})]})]})}),(0,a.jsx)(d.A,{offres:e,onViewOffre:e=>{x(e),h(!0)},onEditOffre:e=>{x(e),b({montageAdministratif:e.montageAdministratif||""}),g(!0)},onDownloadTDR:e=>{if(!e.tdrFile&&!e.lienTDR)return void alert("Aucun fichier TDR disponible pour cette offre.");let s=e.tdrFile||e.lienTDR;if(s){let t=document.createElement("a");t.href=s,t.download="TDR_".concat(e.intituleOffre||e.titre||e.id,".pdf"),t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},viewMode:N,loading:t,showActions:!0,showCheckboxes:!1,showStatus:!1,showPriority:!0,showPoleLead:!0,showMontageAdministratif:!0})]}),m&&o&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"D\xe9tails de l'offre"}),(0,a.jsx)("button",{onClick:()=>{h(!1),x(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("i",{className:"ri-close-line text-2xl"})})]})}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Informations principales"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Intitul\xe9 de l'offre"}),(0,a.jsx)("p",{className:"text-gray-900 font-medium",children:o.intituleOffre||o.titre||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Bailleur"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.bailleur||o.client||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Type d'offre"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.typeOffre||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Pays"}),(0,a.jsx)("p",{className:"text-gray-900",children:Array.isArray(o.pays)&&o.pays.length>0?o.pays.join(", "):o.autrePays||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Objectifs/Description"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.objectifs||o.description||"Aucune description disponible"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Informations financi\xe8res"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Montant"}),(0,a.jsxs)("p",{className:"text-gray-900",children:[o.montant||o.budget||"Non sp\xe9cifi\xe9"," ",o.devise||""]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Dur\xe9e de mission"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.dureeMission||"Non sp\xe9cifi\xe9e"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Date de validation"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.dateValidation?new Date(o.dateValidation).toLocaleDateString("fr-FR"):"Non sp\xe9cifi\xe9e"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Date de d\xe9p\xf4t"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.dateDepot?new Date(o.dateDepot).toLocaleDateString("fr-FR"):"Non sp\xe9cifi\xe9e"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Montage administratif"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Montage administratif"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.montageAdministratif||"Non configur\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Charg\xe9 montage administratif"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.chargeMontageAdministratif||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"D\xe9lai transmission montage administratif"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.delaiTransmissionMontageAdministratif||"Non sp\xe9cifi\xe9"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"D\xe9tails suppl\xe9mentaires"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Profil expert"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.profilExpert||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Nom du site"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.nomSite||"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Lien TDR"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.lienTDR?(0,a.jsx)("a",{href:o.lienTDR,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:"Voir le TDR"}):"Non sp\xe9cifi\xe9"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Commentaire"}),(0,a.jsx)("p",{className:"text-gray-900",children:o.commentaire||"Aucun commentaire"})]})]})]})]})})]})}),f&&o&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Modifier le montage administratif"}),(0,a.jsx)("button",{onClick:()=>g(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("i",{className:"ri-close-line text-2xl"})})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Montage administratif"}),(0,a.jsx)("textarea",{value:u.montageAdministratif,onChange:e=>D("montageAdministratif",e.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"D\xe9tails du montage administratif..."})]})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:()=>g(!1),className:"px-6 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300 transition-colors",children:"Annuler"}),(0,a.jsx)("button",{onClick:()=>{if(o)try{let e=JSON.parse(localStorage.getItem("offres")||"[]").map(e=>e.id===o.id?{...e,montageAdministratif:u.montageAdministratif}:e);localStorage.setItem("offres",JSON.stringify(e)),s(e=>e.map(e=>e.id===o.id?{...e,montageAdministratif:u.montageAdministratif}:e)),g(!1),x(null),b({montageAdministratif:""})}catch(e){console.error("Erreur lors de la sauvegarde:",e)}},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Sauvegarder"})]})]})]})})]})}},78464:(e,s,t)=>{Promise.resolve().then(t.bind(t,59799))}},e=>{var s=s=>e(e.s=s);e.O(0,[255,458,530,368,347,870,358],()=>s(78464)),_N_E=e.O()}]);