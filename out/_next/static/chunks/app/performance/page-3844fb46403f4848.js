(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{150:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var s=a(73365),r=a(59534),d=a.n(r);function l(e){let{className:t="",variant:a="default",size:r="md"}=e,l="".concat("inline-flex items-center gap-2 font-medium transition-all duration-200 hover:scale-105"," ").concat({default:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow-sm hover:shadow-md",outline:"border-2 border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-600 hover:text-white",icon:"bg-blue-100 text-blue-600 p-2 rounded-lg hover:bg-blue-200"}[a]," ").concat({sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[r]," ").concat(t);return(0,s.jsxs)(d(),{href:"/",className:l,children:[(0,s.jsx)("i",{className:"ri-home-line"}),"icon"!==a&&(0,s.jsx)("span",{children:"Accueil"})]})}},47616:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>j});var s=a(73365),r=a(1521),d=a(63925),l=a(42770),n=a(84857),c=a(150),i=a(47736),o=a(32069),x=a(68238),u=a(733),g=a(45635),m=a(72362),h=a(47111),p=a(4691),y=a(68198),b=a(10209),f=a(62463);function j(){return(0,s.jsx)(l.default,{pageName:"performance",children:(0,s.jsx)(n.default,{children:(0,s.jsx)(v,{})})})}function v(){let[e,t]=(0,r.useState)("overview"),[a,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(null),[o,x]=(0,r.useState)(null),[u,g]=(0,r.useState)([]),[m,h]=(0,r.useState)([]),[p,y]=(0,r.useState)({startDate:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]});(0,r.useEffect)(()=>{b(e)},[e,p]);let b=async e=>{l(!0),i(null);try{switch(e){case"overview":let t=await d.dR.getOverview(p.startDate,p.endDate);x(t.data);break;case"poles":let a=await d.dR.getPoles(p.startDate,p.endDate);g(a.data);break;case"commerciaux":let s=await d.dR.getCommerciaux(p.startDate,p.endDate);h(s.data)}}catch(e){i(e instanceof Error?e.message:"Erreur lors du chargement des donn\xe9es")}finally{l(!1)}};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)(c.default,{})}),(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"\uD83D\uDCCA Suivi de Performance"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:"Analysez les performances de votre \xe9quipe et identifiez les opportunit\xe9s d'am\xe9lioration"})]}),(0,s.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-4",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-6",children:[{id:"overview",label:"Vue d'ensemble",icon:"\uD83D\uDCCA"},{id:"poles",label:"Analyse par p\xf4le",icon:"\uD83C\uDFE2"},{id:"commerciaux",label:"Commerciaux",icon:"\uD83D\uDC65"}].map(a=>(0,s.jsxs)("button",{onClick:()=>t(a.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(e===a.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,s.jsx)("span",{className:"mr-2",children:a.icon}),a.label]},a.id))})}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:a?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Chargement..."})]}):n?(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),(0,s.jsx)("p",{className:"text-red-600 dark:text-red-400",children:n}),(0,s.jsx)("button",{onClick:()=>b(e),className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"R\xe9essayer"})]}):(0,s.jsxs)("div",{className:"p-4",children:["overview"===e&&(0,s.jsx)(w,{data:o,dateRange:p,setDateRange:y}),"poles"===e&&(0,s.jsx)(N,{data:u}),"commerciaux"===e&&(0,s.jsx)(k,{data:m})]})})]})]})}function w(e){var t;let{data:a,dateRange:r,setDateRange:d}=e;return a?(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83D\uDCC5 Filtre de p\xe9riode"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date de d\xe9but"}),(0,s.jsx)("input",{type:"date",value:r.startDate,onChange:e=>d(t=>({...t,startDate:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date de fin"}),(0,s.jsx)("input",{type:"date",value:r.endDate,onChange:e=>d(t=>({...t,endDate:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,s.jsx)("button",{onClick:()=>{d({startDate:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]})},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Ann\xe9e en cours"})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83D\uDCCA Statistiques globales"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsx)(D,{title:"Total Offres",value:a.stats.totalOffres,icon:"\uD83D\uDCCB",color:"blue"}),(0,s.jsx)(D,{title:"Offres Approuv\xe9es",value:a.stats.offresApprouvees,icon:"✅",color:"green"}),(0,s.jsx)(D,{title:"Offres Rejet\xe9es",value:a.stats.offresRejetees||0,icon:"❌",color:"red"}),(0,s.jsx)(D,{title:"Taux Gagn\xe9es",value:"".concat(a.stats.tauxGagnees||0,"%"),icon:"\uD83C\uDFC6",color:"green"}),(0,s.jsx)(D,{title:"Taux Perdues",value:"".concat(a.stats.tauxPerdues||0,"%"),icon:"\uD83D\uDCC9",color:"red"}),(0,s.jsx)(D,{title:"En cours",value:"".concat(a.stats.tauxEnCours||0,"%"),icon:"⏳",color:"blue"})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83C\uDFF7️ Statistiques par type d'offre"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Gagn\xe9es"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Perdues"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taux G."}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taux P."})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:(null==(t=a.typesOffre)?void 0:t.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.nom}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-gray-900 dark:text-white",children:e.total}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-green-600",children:e.gagnees}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-red-600",children:e.perdues}),(0,s.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-green-600",children:[e.tauxGagnees,"%"]}),(0,s.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-red-600",children:[e.tauxPerdues,"%"]})]},e.nom)))||(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"px-3 py-2 text-sm text-center text-gray-500",children:"Aucune donn\xe9e disponible"})})})]})}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(i.u,{width:"100%",height:"100%",children:(0,s.jsxs)(o.E,{data:a.typesOffre||[],children:[(0,s.jsx)(x.d,{strokeDasharray:"3 3"}),(0,s.jsx)(u.W,{dataKey:"nom"}),(0,s.jsx)(g.h,{}),(0,s.jsx)(m.m,{}),(0,s.jsx)(h.s,{}),(0,s.jsx)(p.y,{dataKey:"gagnees",stackId:"a",fill:"#10B981",name:"Gagn\xe9es"}),(0,s.jsx)(p.y,{dataKey:"perdues",stackId:"a",fill:"#EF4444",name:"Perdues"})]})})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83D\uDCCA R\xe9partition Approuv\xe9es/Rejet\xe9es"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(i.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.r,{children:[(0,s.jsx)(b.F,{data:[{name:"Approuv\xe9es",value:a.stats.offresApprouvees,color:"#10B981"},{name:"Rejet\xe9es",value:a.stats.offresRejetees||0,color:"#EF4444"},{name:"En cours",value:a.stats.totalOffres-(a.stats.offresApprouvees+(a.stats.offresRejetees||0)),color:"#3B82F6"}],cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a)},children:[{name:"Approuv\xe9es",value:a.stats.offresApprouvees,color:"#10B981"},{name:"Rejet\xe9es",value:a.stats.offresRejetees||0,color:"#EF4444"},{name:"En cours",value:a.stats.totalOffres-(a.stats.offresApprouvees+(a.stats.offresRejetees||0)),color:"#3B82F6"}].map((e,t)=>(0,s.jsx)(f.f,{fill:e.color},"cell-".concat(t)))}),(0,s.jsx)(m.m,{})]})})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83C\uDFAF Taux Gagn\xe9es/Perdues"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(i.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.r,{children:[(0,s.jsx)(b.F,{data:[{name:"Gagn\xe9es",value:a.stats.tauxGagnees||0,color:"#10B981"},{name:"Perdues",value:a.stats.tauxPerdues||0,color:"#EF4444"},{name:"En cours",value:a.stats.tauxEnCours||0,color:"#3B82F6"}],cx:"50%",cy:"50%",outerRadius:80,dataKey:"value",label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a,"%")},children:[{name:"Gagn\xe9es",value:a.stats.tauxGagnees||0,color:"#10B981"},{name:"Perdues",value:a.stats.tauxPerdues||0,color:"#EF4444"},{name:"En cours",value:a.stats.tauxEnCours||0,color:"#3B82F6"}].map((e,t)=>(0,s.jsx)(f.f,{fill:e.color},"cell-".concat(t)))}),(0,s.jsx)(m.m,{})]})})})]})]})]}):null}function N(e){let{data:t}=e,[a,l]=(0,r.useState)([]),[n,c]=(0,r.useState)(!1),[j,v]=(0,r.useState)(null),[w,N]=(0,r.useState)({startDate:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]});(0,r.useEffect)(()=>{k()},[w]);let k=async()=>{c(!0),v(null);try{let e=await d.dR.getPolesDetailed(w.startDate,w.endDate);e.success?l(e.data):v("Erreur lors du chargement des donn\xe9es")}catch(e){v(e instanceof Error?e.message:"Erreur lors du chargement des donn\xe9es")}finally{c(!1)}};if(n)return(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Chargement des donn\xe9es..."})]});if(j)return(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"text-red-500 text-xl mb-4",children:"⚠️"}),(0,s.jsx)("p",{className:"text-red-600 dark:text-red-400",children:j}),(0,s.jsx)("button",{onClick:k,className:"mt-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"R\xe9essayer"})]});if(!a.length)return(0,s.jsxs)("div",{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"text-gray-500 text-xl mb-4",children:"\uD83D\uDCCA"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Aucune donn\xe9e disponible pour la p\xe9riode s\xe9lectionn\xe9e"})]});let D=[...a].sort((e,t)=>t.tauxSucces-e.tauxSucces);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83D\uDCC5 Filtre de p\xe9riode"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date de d\xe9but"}),(0,s.jsx)("input",{type:"date",value:w.startDate,onChange:e=>N(t=>({...t,startDate:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date de fin"}),(0,s.jsx)("input",{type:"date",value:w.endDate,onChange:e=>N(t=>({...t,endDate:e.target.value})),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,s.jsx)("button",{onClick:()=>{N({startDate:new Date(new Date().getFullYear(),0,1).toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0]})},className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Ann\xe9e en cours"})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:D.map((e,t)=>(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:e.nom}),(0,s.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-800":2===t?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:["#",t+1]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.offresLeadAttribuees}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Lead attribu\xe9es"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.offresAssocieAttribuees}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Associ\xe9 attribu\xe9es"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.offresLeadMontees}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Lead mont\xe9es"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-indigo-600",children:e.offresAssocieMontees}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Associ\xe9 mont\xe9es"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Succ\xe8s"}),(0,s.jsxs)("span",{className:"font-medium",children:[e.tauxSucces,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:(0,s.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(e.tauxSucces,"%")}})}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"Perte"}),(0,s.jsxs)("span",{className:"font-medium",children:[e.tauxPerte,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:(0,s.jsx)("div",{className:"bg-red-600 h-2 rounded-full",style:{width:"".concat(e.tauxPerte,"%")}})}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{children:"En cours"}),(0,s.jsxs)("span",{className:"font-medium",children:[e.tauxAttente,"%"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(e.tauxAttente,"%")}})})]})]},e.nom))}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83D\uDCCA Tableau comparatif par p\xf4le"}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"P\xf4le"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Classement"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Offres"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead Attribu\xe9es"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Associ\xe9 Attribu\xe9es"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lead Mont\xe9es"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Associ\xe9 Mont\xe9es"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taux Succ\xe8s"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taux Perte"}),(0,s.jsx)("th",{className:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taux Attente"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:D.map((e,t)=>(0,s.jsxs)("tr",{className:t%2==0?"bg-white dark:bg-gray-800":"bg-gray-50 dark:bg-gray-700",children:[(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.nom}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center",children:(0,s.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(0===t?"bg-yellow-100 text-yellow-800":1===t?"bg-gray-100 text-gray-800":2===t?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:["#",t+1]})}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-gray-900 dark:text-white",children:e.totalOffres}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-blue-600",children:e.offresLeadAttribuees}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-green-600",children:e.offresAssocieAttribuees}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-purple-600",children:e.offresLeadMontees}),(0,s.jsx)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-indigo-600",children:e.offresAssocieMontees}),(0,s.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-green-600 font-medium",children:[e.tauxSucces,"%"]}),(0,s.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-red-600 font-medium",children:[e.tauxPerte,"%"]}),(0,s.jsxs)("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-center text-blue-600 font-medium",children:[e.tauxAttente,"%"]})]},e.nom))})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83D\uDCCA Offres attribu\xe9es par p\xf4le"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(i.u,{width:"100%",height:"100%",children:(0,s.jsxs)(o.E,{data:D,children:[(0,s.jsx)(x.d,{strokeDasharray:"3 3"}),(0,s.jsx)(u.W,{dataKey:"nom"}),(0,s.jsx)(g.h,{}),(0,s.jsx)(m.m,{}),(0,s.jsx)(h.s,{}),(0,s.jsx)(p.y,{dataKey:"offresLeadAttribuees",stackId:"a",fill:"#3B82F6",name:"Lead"}),(0,s.jsx)(p.y,{dataKey:"offresAssocieAttribuees",stackId:"a",fill:"#10B981",name:"Associ\xe9"})]})})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83D\uDCCA Offres mont\xe9es par p\xf4le"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(i.u,{width:"100%",height:"100%",children:(0,s.jsxs)(o.E,{data:D,children:[(0,s.jsx)(x.d,{strokeDasharray:"3 3"}),(0,s.jsx)(u.W,{dataKey:"nom"}),(0,s.jsx)(g.h,{}),(0,s.jsx)(m.m,{}),(0,s.jsx)(h.s,{}),(0,s.jsx)(p.y,{dataKey:"offresLeadMontees",stackId:"a",fill:"#8B5CF6",name:"Lead"}),(0,s.jsx)(p.y,{dataKey:"offresAssocieMontees",stackId:"a",fill:"#6366F1",name:"Associ\xe9"})]})})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83C\uDFAF Taux de succ\xe8s par p\xf4le"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(i.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.r,{children:[(0,s.jsx)(b.F,{data:D.map(e=>({name:e.nom,value:e.tauxSucces,color:e.tauxSucces>=70?"#10B981":e.tauxSucces>=50?"#F59E0B":"#EF4444"})),cx:"50%",cy:"50%",outerRadius:60,dataKey:"value",label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a,"%")},children:D.map((e,t)=>(0,s.jsx)(f.f,{fill:e.tauxSucces>=70?"#10B981":e.tauxSucces>=50?"#F59E0B":"#EF4444"},"cell-".concat(t)))}),(0,s.jsx)(m.m,{})]})})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"\uD83D\uDCC9 Taux de perte par p\xf4le"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(i.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.r,{children:[(0,s.jsx)(b.F,{data:D.map(e=>({name:e.nom,value:e.tauxPerte,color:e.tauxPerte<=20?"#10B981":e.tauxPerte<=40?"#F59E0B":"#EF4444"})),cx:"50%",cy:"50%",outerRadius:60,dataKey:"value",label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a,"%")},children:D.map((e,t)=>(0,s.jsx)(f.f,{fill:e.tauxPerte<=20?"#10B981":e.tauxPerte<=40?"#F59E0B":"#EF4444"},"cell-".concat(t)))}),(0,s.jsx)(m.m,{})]})})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:"⏳ Taux d'attente par p\xf4le"}),(0,s.jsx)("div",{className:"h-64",children:(0,s.jsx)(i.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.r,{children:[(0,s.jsx)(b.F,{data:D.map(e=>({name:e.nom,value:e.tauxAttente,color:e.tauxAttente<=30?"#10B981":e.tauxAttente<=60?"#F59E0B":"#EF4444"})),cx:"50%",cy:"50%",outerRadius:60,dataKey:"value",label:e=>{let{name:t,value:a}=e;return"".concat(t,": ").concat(a,"%")},children:D.map((e,t)=>(0,s.jsx)(f.f,{fill:e.tauxAttente<=30?"#10B981":e.tauxAttente<=60?"#F59E0B":"#EF4444"},"cell-".concat(t)))}),(0,s.jsx)(m.m,{})]})})})]})]})]})}function k(e){let{data:t}=e;return t.length?(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,s.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commercial"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"R\xf4le"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approuv\xe9es"}),(0,s.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taux"})]})}),(0,s.jsx)("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.nom})}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.role}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.totalOffres}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.offresApprouvees}),(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,s.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.tauxReussite>=70?"bg-green-100 text-green-800":e.tauxReussite>=50?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[e.tauxReussite,"%"]})})]},e.nom))})]})})}):(0,s.jsx)("p",{className:"text-gray-500",children:"Aucune donn\xe9e disponible"})}function D(e){let{title:t,value:a,icon:r,color:d}=e;return(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm border border-gray-100 dark:border-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"p-2 rounded-full ".concat({blue:"bg-blue-50 text-blue-600 dark:bg-blue-900 dark:text-blue-400",green:"bg-green-50 text-green-600 dark:bg-green-900 dark:text-green-400",purple:"bg-purple-50 text-purple-600 dark:bg-purple-900 dark:text-purple-400",red:"bg-red-50 text-red-600 dark:bg-red-900 dark:text-red-400",orange:"bg-orange-50 text-orange-600 dark:bg-orange-900 dark:text-orange-400"}[d]),children:(0,s.jsx)("span",{className:"text-xl",children:r})}),(0,s.jsxs)("div",{className:"ml-3",children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:t}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a})]})]})})}},63925:(e,t,a)=>{"use strict";a.d(t,{H2:()=>x,R2:()=>u,sF:()=>g,dR:()=>m,c9:()=>h});var s=function(e){return e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.CRITICAL="CRITICAL",e}({});class r{formatMessage(e){let t=new Date(e.timestamp).toLocaleTimeString(),a=e.context?"[".concat(e.context,"]"):"",s="[".concat(e.level,"]"),r="".concat(t," ").concat(s," ").concat(a," ").concat(e.message);return e.data&&(r+=" | Data: ".concat(JSON.stringify(e.data))),e.error&&(r+=" | Error: ".concat(e.error.message),e.error.stack&&(r+=" | Stack: ".concat(e.error.stack))),r}addLog(e){if(this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.isDevelopment){let t=this.formatMessage(e);switch(e.level){case"DEBUG":console.debug(t);break;case"INFO":console.info(t);break;case"WARN":console.warn(t);break;case"ERROR":case"CRITICAL":console.error(t)}}!this.isDevelopment&&e.level>="ERROR"&&this.sendToMonitoring(e)}async sendToMonitoring(e){try{{let t=JSON.parse(localStorage.getItem("bms_monitoring_logs")||"[]");t.push(e),localStorage.setItem("bms_monitoring_logs",JSON.stringify(t.slice(-100)))}}catch(e){console.error("Erreur lors de l'envoi au monitoring:",e)}}debug(e,t,a){this.addLog({level:"DEBUG",message:e,context:t,data:a,timestamp:new Date().toISOString()})}info(e,t,a){this.addLog({level:"INFO",message:e,context:t,data:a,timestamp:new Date().toISOString()})}warn(e,t,a){this.addLog({level:"WARN",message:e,context:t,data:a,timestamp:new Date().toISOString()})}error(e,t,a,s){this.addLog({level:"ERROR",message:e,error:t,context:a,data:s,timestamp:new Date().toISOString()})}critical(e,t,a,s){this.addLog({level:"CRITICAL",message:e,error:t,context:a,data:s,timestamp:new Date().toISOString()})}apiError(e,t,a,s){this.error("Erreur API sur ".concat(e),t,"API",{endpoint:e,status:null==a?void 0:a.status,statusText:null==a?void 0:a.statusText,url:null==a?void 0:a.url,data:s})}dashboardError(e,t,a,s){this.error("Erreur Dashboard: ".concat(e),t,"Dashboard",{operation:e,filters:a,data:s})}authError(e,t,a){this.error("Erreur Auth: ".concat(e),t,"Auth",a)}getRecentLogs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,a=this.logs;return e&&(a=a.filter(t=>t.level===e)),a.slice(-t)}exportLogs(){return JSON.stringify(this.logs,null,2)}clearLogs(){this.logs=[]}getLogStats(){let e={total:this.logs.length,byLevel:{},recentErrors:this.logs.filter(e=>e.level>="ERROR").slice(-10)};return Object.values(s).forEach(t=>{e.byLevel[t]=this.logs.filter(e=>e.level===t).length}),e}constructor(){this.logs=[],this.maxLogs=1e3,this.isDevelopment=!1}}let d=new r,l=(e,t,a)=>d.info(e,t,a),n=(e,t,a)=>d.warn(e,t,a),c=(e,t,a,s)=>d.error(e,t,a,s);var i=a(94089);let o={BASE_URL:"http://localhost:5000",NODE_ENV:"production",APP_NAME:i.env.NEXT_PUBLIC_APP_NAME||"BMS",APP_VERSION:i.env.NEXT_PUBLIC_APP_VERSION||"1.0.0",REQUEST_TIMEOUT:1e4,MAX_RETRIES:3,RETRY_DELAY:1e3}.BASE_URL;l("Configuration: NEXT_PUBLIC_API_URL=".concat("http://localhost:5000"),"API"),l("URL de base utilis\xe9e: ".concat(o),"API");let x=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(o).concat(e),s=localStorage.getItem("token");l("Appel vers: ".concat(a),"API"),l("Token pr\xe9sent: ".concat(s?"OUI":"NON"),"API"),s&&(l("Token (premiers caract\xe8res): ".concat(s.substring(0,20),"..."),"API"),l("Longueur du token: ".concat(s.length),"API"));let r={headers:{"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers},...t};try{let t;l("Envoi de la requ\xeate vers: ".concat(a),"API");let s=await fetch(a,r);if(l("R\xe9ponse re\xe7ue: ".concat(s.status," ").concat(s.statusText),"API"),l("Headers de r\xe9ponse: ".concat(JSON.stringify(Object.fromEntries(s.headers.entries()))),"API"),!s.ok){let t={};try{t=await s.json()}catch(e){n("Impossible de parser le body d'erreur: ".concat(e instanceof Error?e.message:String(e)),"API"),t={error:"Erreur HTTP ".concat(s.status,": ").concat(s.statusText)}}if(d.apiError(e,Error("HTTP ".concat(s.status,": ").concat(s.statusText)),s,{status:s.status,statusText:s.statusText,url:a,errorData:t,headers:Object.fromEntries(s.headers.entries())}),401===s.status)throw d.authError("Token invalide",Error(t.error||"Token expir\xe9 ou invalide"),t),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),l("Token invalide supprim\xe9 du localStorage","API"),"/login"!==window.location.pathname&&(l("Redirection vers /login","API"),window.location.href="/login"),Error("Token invalide - Redirection vers la connexion");let r=t.error||t.message||"Erreur HTTP ".concat(s.status,": ").concat(s.statusText);throw Error(r)}try{t=await s.json(),l("Succ\xe8s: ".concat(e),"API",t)}catch(e){throw c("Erreur lors du parsing de la r\xe9ponse: ".concat(e instanceof Error?e.message:String(e)),e instanceof Error?e:Error(String(e)),"API"),Error("Erreur lors du parsing de la r\xe9ponse: ".concat(e instanceof Error?e.message:String(e)))}return t}catch(s){if(d.apiError(e,s instanceof Error?s:Error(String(s)),void 0,{url:a,timestamp:new Date().toISOString()}),(s instanceof Error?s.message:String(s))==="Token invalide - Redirection vers la connexion")throw s;let t="Erreur lors de la r\xe9cup\xe9ration des donn\xe9es: ".concat(s instanceof Error?s.message:String(s));throw e.includes("/performance/")&&(t="Impossible de charger les donn\xe9es de performance. V\xe9rifiez votre connexion et r\xe9essayez."),c("Message d'erreur am\xe9lior\xe9: ".concat(t),s instanceof Error?s:Error(String(s)),"API"),Error(t)}},u={login:async e=>x("/api/auth/login",{method:"POST",body:JSON.stringify(e)}),logout:async()=>(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),{success:!0,message:"D\xe9connexion r\xe9ussie"}),register:async e=>x("/api/auth/register",{method:"POST",body:JSON.stringify(e)}),verifyToken:async()=>x("/api/auth/verify")},g={getAll:async()=>x("/api/offres"),create:async e=>x("/api/offres",{method:"POST",body:JSON.stringify(e)}),update:async(e,t)=>x("/api/offres/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:async e=>x("/api/offres/".concat(e),{method:"DELETE"}),validate:async(e,t)=>x("/api/offres/".concat(e,"/validate"),{method:"PATCH",body:JSON.stringify(t)})},m={getOverview:async(e,t)=>{let a=e&&t?"?startDate=".concat(e,"&endDate=").concat(t):"";return x("/api/performance/overview".concat(a))},getPoles:async(e,t)=>{let a=e&&t?"?startDate=".concat(e,"&endDate=").concat(t):"";return x("/api/performance/poles".concat(a))},getPolesDetailed:async(e,t)=>{let a=e&&t?"?startDate=".concat(e,"&endDate=").concat(t):"";return x("/api/performance/poles-detailed".concat(a))},getTrends:async()=>x("/api/performance/trends"),getCommerciaux:async(e,t)=>{let a=e&&t?"?startDate=".concat(e,"&endDate=").concat(t):"";return x("/api/performance/commerciaux".concat(a))},getMetrics:async()=>x("/api/performance/metrics")},h={getAll:async e=>x("/api/scheduled-searches?userId=".concat(e)),getOptions:async()=>x("/api/scheduled-searches/options"),create:async e=>x("/api/scheduled-searches",{method:"POST",body:JSON.stringify(e)}),update:async e=>x("/api/scheduled-searches",{method:"PUT",body:JSON.stringify(e)}),delete:async e=>x("/api/scheduled-searches",{method:"DELETE",body:JSON.stringify(e)}),getSavedKeywords:async e=>x("/api/scheduled-searches/saved-keywords?userId=".concat(e)),saveKeywords:async e=>x("/api/scheduled-searches/saved-keywords",{method:"POST",body:JSON.stringify(e)}),deleteSavedKeywords:async(e,t)=>x("/api/scheduled-searches/saved-keywords/".concat(e),{method:"DELETE",body:JSON.stringify({userId:t})}),getSearchStats:async e=>x("/api/scheduled-searches/search-stats".concat(e?"?userId=".concat(e):""))}},96463:(e,t,a)=>{Promise.resolve().then(a.bind(a,47616))}},e=>{var t=t=>e(e.s=t);e.O(0,[255,775,458,530,347,870,358],()=>t(96463)),_N_E=e.O()}]);