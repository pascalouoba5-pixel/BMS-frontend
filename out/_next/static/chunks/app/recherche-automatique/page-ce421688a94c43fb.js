(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[278],{63678:(e,r,t)=>{Promise.resolve().then(t.bind(t,99047))},63925:(e,r,t)=>{"use strict";t.d(r,{H2:()=>u,R2:()=>m,sF:()=>g,dR:()=>h,c9:()=>x});var s=function(e){return e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e.CRITICAL="CRITICAL",e}({});class a{formatMessage(e){let r=new Date(e.timestamp).toLocaleTimeString(),t=e.context?"[".concat(e.context,"]"):"",s="[".concat(e.level,"]"),a="".concat(r," ").concat(s," ").concat(t," ").concat(e.message);return e.data&&(a+=" | Data: ".concat(JSON.stringify(e.data))),e.error&&(a+=" | Error: ".concat(e.error.message),e.error.stack&&(a+=" | Stack: ".concat(e.error.stack))),a}addLog(e){if(this.logs.push(e),this.logs.length>this.maxLogs&&(this.logs=this.logs.slice(-this.maxLogs)),this.isDevelopment){let r=this.formatMessage(e);switch(e.level){case"DEBUG":console.debug(r);break;case"INFO":console.info(r);break;case"WARN":console.warn(r);break;case"ERROR":case"CRITICAL":console.error(r)}}!this.isDevelopment&&e.level>="ERROR"&&this.sendToMonitoring(e)}async sendToMonitoring(e){try{{let r=JSON.parse(localStorage.getItem("bms_monitoring_logs")||"[]");r.push(e),localStorage.setItem("bms_monitoring_logs",JSON.stringify(r.slice(-100)))}}catch(e){console.error("Erreur lors de l'envoi au monitoring:",e)}}debug(e,r,t){this.addLog({level:"DEBUG",message:e,context:r,data:t,timestamp:new Date().toISOString()})}info(e,r,t){this.addLog({level:"INFO",message:e,context:r,data:t,timestamp:new Date().toISOString()})}warn(e,r,t){this.addLog({level:"WARN",message:e,context:r,data:t,timestamp:new Date().toISOString()})}error(e,r,t,s){this.addLog({level:"ERROR",message:e,error:r,context:t,data:s,timestamp:new Date().toISOString()})}critical(e,r,t,s){this.addLog({level:"CRITICAL",message:e,error:r,context:t,data:s,timestamp:new Date().toISOString()})}apiError(e,r,t,s){this.error("Erreur API sur ".concat(e),r,"API",{endpoint:e,status:null==t?void 0:t.status,statusText:null==t?void 0:t.statusText,url:null==t?void 0:t.url,data:s})}dashboardError(e,r,t,s){this.error("Erreur Dashboard: ".concat(e),r,"Dashboard",{operation:e,filters:t,data:s})}authError(e,r,t){this.error("Erreur Auth: ".concat(e),r,"Auth",t)}getRecentLogs(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,t=this.logs;return e&&(t=t.filter(r=>r.level===e)),t.slice(-r)}exportLogs(){return JSON.stringify(this.logs,null,2)}clearLogs(){this.logs=[]}getLogStats(){let e={total:this.logs.length,byLevel:{},recentErrors:this.logs.filter(e=>e.level>="ERROR").slice(-10)};return Object.values(s).forEach(r=>{e.byLevel[r]=this.logs.filter(e=>e.level===r).length}),e}constructor(){this.logs=[],this.maxLogs=1e3,this.isDevelopment=!1}}let l=new a,o=(e,r,t)=>l.info(e,r,t),n=(e,r,t)=>l.warn(e,r,t),i=(e,r,t,s)=>l.error(e,r,t,s);var d=t(94089);let c={BASE_URL:"http://localhost:5000",NODE_ENV:"production",APP_NAME:d.env.NEXT_PUBLIC_APP_NAME||"BMS",APP_VERSION:d.env.NEXT_PUBLIC_APP_VERSION||"1.0.0",REQUEST_TIMEOUT:1e4,MAX_RETRIES:3,RETRY_DELAY:1e3}.BASE_URL;o("Configuration: NEXT_PUBLIC_API_URL=".concat("http://localhost:5000"),"API"),o("URL de base utilis\xe9e: ".concat(c),"API");let u=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat(c).concat(e),s=localStorage.getItem("token");o("Appel vers: ".concat(t),"API"),o("Token pr\xe9sent: ".concat(s?"OUI":"NON"),"API"),s&&(o("Token (premiers caract\xe8res): ".concat(s.substring(0,20),"..."),"API"),o("Longueur du token: ".concat(s.length),"API"));let a={headers:{"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...r.headers},...r};try{let r;o("Envoi de la requ\xeate vers: ".concat(t),"API");let s=await fetch(t,a);if(o("R\xe9ponse re\xe7ue: ".concat(s.status," ").concat(s.statusText),"API"),o("Headers de r\xe9ponse: ".concat(JSON.stringify(Object.fromEntries(s.headers.entries()))),"API"),!s.ok){let r={};try{r=await s.json()}catch(e){n("Impossible de parser le body d'erreur: ".concat(e instanceof Error?e.message:String(e)),"API"),r={error:"Erreur HTTP ".concat(s.status,": ").concat(s.statusText)}}if(l.apiError(e,Error("HTTP ".concat(s.status,": ").concat(s.statusText)),s,{status:s.status,statusText:s.statusText,url:t,errorData:r,headers:Object.fromEntries(s.headers.entries())}),401===s.status)throw l.authError("Token invalide",Error(r.error||"Token expir\xe9 ou invalide"),r),localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),o("Token invalide supprim\xe9 du localStorage","API"),"/login"!==window.location.pathname&&(o("Redirection vers /login","API"),window.location.href="/login"),Error("Token invalide - Redirection vers la connexion");let a=r.error||r.message||"Erreur HTTP ".concat(s.status,": ").concat(s.statusText);throw Error(a)}try{r=await s.json(),o("Succ\xe8s: ".concat(e),"API",r)}catch(e){throw i("Erreur lors du parsing de la r\xe9ponse: ".concat(e instanceof Error?e.message:String(e)),e instanceof Error?e:Error(String(e)),"API"),Error("Erreur lors du parsing de la r\xe9ponse: ".concat(e instanceof Error?e.message:String(e)))}return r}catch(s){if(l.apiError(e,s instanceof Error?s:Error(String(s)),void 0,{url:t,timestamp:new Date().toISOString()}),(s instanceof Error?s.message:String(s))==="Token invalide - Redirection vers la connexion")throw s;let r="Erreur lors de la r\xe9cup\xe9ration des donn\xe9es: ".concat(s instanceof Error?s.message:String(s));throw e.includes("/performance/")&&(r="Impossible de charger les donn\xe9es de performance. V\xe9rifiez votre connexion et r\xe9essayez."),i("Message d'erreur am\xe9lior\xe9: ".concat(r),s instanceof Error?s:Error(String(s)),"API"),Error(r)}},m={login:async e=>u("/api/auth/login",{method:"POST",body:JSON.stringify(e)}),logout:async()=>(localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("userRole"),{success:!0,message:"D\xe9connexion r\xe9ussie"}),register:async e=>u("/api/auth/register",{method:"POST",body:JSON.stringify(e)}),verifyToken:async()=>u("/api/auth/verify")},g={getAll:async()=>u("/api/offres"),create:async e=>u("/api/offres",{method:"POST",body:JSON.stringify(e)}),update:async(e,r)=>u("/api/offres/".concat(e),{method:"PUT",body:JSON.stringify(r)}),delete:async e=>u("/api/offres/".concat(e),{method:"DELETE"}),validate:async(e,r)=>u("/api/offres/".concat(e,"/validate"),{method:"PATCH",body:JSON.stringify(r)})},h={getOverview:async(e,r)=>{let t=e&&r?"?startDate=".concat(e,"&endDate=").concat(r):"";return u("/api/performance/overview".concat(t))},getPoles:async(e,r)=>{let t=e&&r?"?startDate=".concat(e,"&endDate=").concat(r):"";return u("/api/performance/poles".concat(t))},getPolesDetailed:async(e,r)=>{let t=e&&r?"?startDate=".concat(e,"&endDate=").concat(r):"";return u("/api/performance/poles-detailed".concat(t))},getTrends:async()=>u("/api/performance/trends"),getCommerciaux:async(e,r)=>{let t=e&&r?"?startDate=".concat(e,"&endDate=").concat(r):"";return u("/api/performance/commerciaux".concat(t))},getMetrics:async()=>u("/api/performance/metrics")},x={getAll:async e=>u("/api/scheduled-searches?userId=".concat(e)),getOptions:async()=>u("/api/scheduled-searches/options"),create:async e=>u("/api/scheduled-searches",{method:"POST",body:JSON.stringify(e)}),update:async e=>u("/api/scheduled-searches",{method:"PUT",body:JSON.stringify(e)}),delete:async e=>u("/api/scheduled-searches",{method:"DELETE",body:JSON.stringify(e)}),getSavedKeywords:async e=>u("/api/scheduled-searches/saved-keywords?userId=".concat(e)),saveKeywords:async e=>u("/api/scheduled-searches/saved-keywords",{method:"POST",body:JSON.stringify(e)}),deleteSavedKeywords:async(e,r)=>u("/api/scheduled-searches/saved-keywords/".concat(e),{method:"DELETE",body:JSON.stringify({userId:r})}),getSearchStats:async e=>u("/api/scheduled-searches/search-stats".concat(e?"?userId=".concat(e):""))}},99047:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(73365),a=t(1521),l=t(84857),o=t(42770),n=t(63925);function i(e){let{frequency:r,customSchedule:t,period:l,onFrequencyChange:o,onCustomScheduleChange:i,onPeriodChange:d,onSave:c,onCancel:u}=e,[m,g]=(0,a.useState)([]),[h,x]=(0,a.useState)(null),[p,b]=(0,a.useState)(t||{}),[y,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{f()},[]);let f=async()=>{try{let e=await n.c9.getOptions();e.success&&(g(e.frequencies),x(e.customizationOptions))}catch(e){console.error("Erreur lors du chargement des options:",e)}},k=e=>{o(e),"custom"!==e&&(i(null),b({}))},j=(e,r)=>{let t={...p};Array.isArray(r)?t[e]=r:"number"==typeof r&&(t[e]=r),b(t),i(t)};return y?(0,s.jsx)("div",{className:"flex justify-center items-center p-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"P\xe9riode de recherche"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[{value:"all",label:"Toutes les p\xe9riodes",description:"Recherche continue sans limite de temps"},{value:"today",label:"Aujourd'hui",description:"Offres publi\xe9es aujourd'hui uniquement"},{value:"week",label:"Cette semaine",description:"Offres publi\xe9es cette semaine"},{value:"month",label:"Ce mois",description:"Offres publi\xe9es ce mois"},{value:"quarter",label:"Ce trimestre",description:"Offres publi\xe9es ce trimestre"},{value:"year",label:"Cette ann\xe9e",description:"Offres publi\xe9es cette ann\xe9e"},{value:"custom",label:"P\xe9riode personnalis\xe9e",description:"D\xe9finir une p\xe9riode sp\xe9cifique"}].map(e=>(0,s.jsxs)("label",{className:"relative flex cursor-pointer rounded-lg border p-4 focus:outline-none ".concat(l===e.value?"border-green-500 bg-green-50 dark:bg-green-900/20":"border-gray-300 dark:border-gray-600"),children:[(0,s.jsx)("input",{type:"radio",name:"period",value:e.value,checked:l===e.value,onChange:e=>d(e.target.value),className:"sr-only"}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("p",{className:"font-medium ".concat(l===e.value?"text-green-900 dark:text-green-100":"text-gray-900 dark:text-white"),children:e.label}),(0,s.jsx)("p",{className:"".concat(l===e.value?"text-green-700 dark:text-green-200":"text-gray-500 dark:text-gray-400"),children:e.description})]})}),l===e.value&&(0,s.jsx)("div",{className:"shrink-0 text-green-600",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"})})})]})]},e.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Fr\xe9quence d'ex\xe9cution"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:m.map(e=>(0,s.jsxs)("label",{className:"relative flex cursor-pointer rounded-lg border p-4 focus:outline-none ".concat(r===e.value?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600"),children:[(0,s.jsx)("input",{type:"radio",name:"frequency",value:e.value,checked:r===e.value,onChange:e=>k(e.target.value),className:"sr-only"}),(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("p",{className:"font-medium ".concat(r===e.value?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"),children:e.label}),(0,s.jsx)("p",{className:"".concat(r===e.value?"text-blue-700 dark:text-blue-200":"text-gray-500 dark:text-gray-400"),children:e.description})]})}),r===e.value&&(0,s.jsx)("div",{className:"shrink-0 text-blue-600",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"})})})]})]},e.value))})]}),"custom"!==r?null:(0,s.jsxs)("div",{className:"space-y-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,s.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Configuration personnalis\xe9e"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Jours de la semaine"}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-2",children:null==h?void 0:h.weekDays.map(e=>{var r;return(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:(null==(r=p.weekDays)?void 0:r.includes(e.value))||!1,onChange:r=>{let t=p.weekDays||[];r.target.checked?j("weekDays",[...t,e.value]):j("weekDays",t.filter(r=>r!==e.value))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:e.label.slice(0,3)})]},e.value)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Heures d'ex\xe9cution"}),(0,s.jsx)("div",{className:"grid grid-cols-6 gap-2 max-h-32 overflow-y-auto",children:null==h?void 0:h.hours.map(e=>{var r;return(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:(null==(r=p.hours)?void 0:r.includes(e.value))||!1,onChange:r=>{let t=p.hours||[];r.target.checked?j("hours",[...t,e.value]):j("hours",t.filter(r=>r!==e.value))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:e.label})]},e.value)})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Intervalle en heures"}),(0,s.jsx)("input",{type:"number",min:"1",max:"168",value:p.intervalHours||"",onChange:e=>j("intervalHours",parseInt(e.target.value)||void 0),placeholder:"Ex: 6 pour toutes les 6 heures",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Laissez vide si vous utilisez les jours/heures sp\xe9cifiques"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Jours du mois"}),(0,s.jsx)("div",{className:"grid grid-cols-10 gap-1 max-h-32 overflow-y-auto",children:null==h?void 0:h.monthDays.map(e=>{var r;return(0,s.jsxs)("label",{className:"flex items-center",children:[(0,s.jsx)("input",{type:"checkbox",checked:(null==(r=p.monthDays)?void 0:r.includes(e.value))||!1,onChange:r=>{let t=p.monthDays||[];r.target.checked?j("monthDays",[...t,e.value]):j("monthDays",t.filter(r=>r!==e.value))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,s.jsx)("span",{className:"ml-2 text-xs text-gray-700 dark:text-gray-300",children:e.label})]},e.value)})})]}),(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg",children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"R\xe9sum\xe9 du planning"}),(0,s.jsxs)("div",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[p.weekDays&&p.weekDays.length>0&&(0,s.jsxs)("p",{children:["• Jours: ",p.weekDays.map(e=>{var r;return null==h||null==(r=h.weekDays.find(r=>r.value===e))?void 0:r.label}).join(", ")]}),p.hours&&p.hours.length>0&&(0,s.jsxs)("p",{children:["• Heures: ",p.hours.map(e=>{var r;return null==h||null==(r=h.hours.find(r=>r.value===e))?void 0:r.label}).join(", ")]}),p.intervalHours&&(0,s.jsxs)("p",{children:["• Intervalle: Toutes les ",p.intervalHours," heures"]}),p.monthDays&&p.monthDays.length>0&&(0,s.jsxs)("p",{children:["• Jours du mois: ",p.monthDays.join(", ")]}),0===Object.keys(p).length&&(0,s.jsx)("p",{children:"• Aucune configuration personnalis\xe9e d\xe9finie"})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[(0,s.jsx)("button",{onClick:u,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),(0,s.jsx)("button",{onClick:()=>{c()},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:"Enregistrer"})]})]})}function d(){let[e,r]=(0,a.useState)(""),[t,d]=(0,a.useState)([]),[u,m]=(0,a.useState)(!1),[g,h]=(0,a.useState)([]),[x,p]=(0,a.useState)([]),[b,y]=(0,a.useState)("search"),[v,f]=(0,a.useState)(null),[k,j]=(0,a.useState)({keywords:"",frequency:"daily",period:"all",customSchedule:null}),[N,w]=(0,a.useState)(!1),[D,S]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=localStorage.getItem("user");e&&f(JSON.parse(e))},[]);let C=async()=>{if(e.trim()){m(!0);try{let r=await (0,n.H2)("/api/auto-search",{method:"POST",body:JSON.stringify({keywords:e.trim(),maxResults:100})});r.success&&(d(r.results),console.log("\uD83D\uDD0D Recherche termin\xe9e: ".concat(r.results.length," r\xe9sultats trouv\xe9s sur ").concat(r.sites_searched.length," sites")))}catch(e){console.error("Erreur lors de la recherche:",e)}finally{m(!1)}}},E=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en_cours";if(null==v?void 0:v.id)try{await (0,n.H2)("/api/validate/".concat(e),{method:"POST",body:JSON.stringify({userId:v.id,status:r})}),d(r=>r.map(r=>r.id===e?{...r,validation_count:(r.validation_count||0)+1}:r)),O()}catch(e){console.error("Erreur lors de la validation:",e)}},O=async()=>{if(null==v?void 0:v.id)try{let e=await (0,n.H2)("/api/recommend?userId=".concat(v.id,"&limit=10"));e.success&&p(e.recommendations)}catch(e){console.error("Erreur lors du chargement des recommandations:",e)}},A=async()=>{if(null==v?void 0:v.id)try{let e=await n.c9.getAll(v.id);e.success&&h(e.searches)}catch(e){console.error("Erreur lors du chargement des recherches programm\xe9es:",e)}},R=async()=>{if(null==v?void 0:v.id)try{await n.c9.create({userId:v.id,keywords:k.keywords.trim(),frequency:k.frequency,customSchedule:k.customSchedule}),j({keywords:"",frequency:"daily",period:"all",customSchedule:null}),A(),w(!1)}catch(e){console.error("Erreur lors de l'ajout de la recherche programm\xe9e:",e)}},P=async()=>{if((null==v?void 0:v.id)&&D)try{await n.c9.update({userId:v.id,keywords:D.keywords,frequency:D.frequency,customSchedule:D.custom_schedule?JSON.parse(D.custom_schedule):null,isActive:D.is_active}),S(null),A(),w(!1)}catch(e){console.error("Erreur lors de la mise \xe0 jour:",e)}},I=async e=>{if(null==v?void 0:v.id)try{await n.c9.delete({userId:v.id,keywords:e}),A()}catch(e){console.error("Erreur lors de la suppression:",e)}},_=async e=>{if(null==v?void 0:v.id)try{await n.c9.update({userId:v.id,keywords:e.keywords,frequency:e.frequency,customSchedule:e.custom_schedule?JSON.parse(e.custom_schedule):null,isActive:!e.is_active}),A()}catch(e){console.error("Erreur lors de la modification du statut:",e)}},T=e=>{S(e),j({keywords:e.keywords,frequency:e.frequency,period:e.period||"all",customSchedule:e.custom_schedule?JSON.parse(e.custom_schedule):null}),w(!0)},L=()=>{S(null),j({keywords:"",frequency:"daily",period:"all",customSchedule:null}),w(!0)},q=()=>{w(!1),S(null),j({keywords:"",frequency:"daily",period:"all",customSchedule:null})};return(0,a.useEffect)(()=>{(null==v?void 0:v.id)&&(O(),A())},[v]),(0,s.jsx)(o.default,{pageName:"recherche-automatique",children:(0,s.jsxs)(l.default,{children:[(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Recherche Automatique d'Opportunit\xe9s"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Recherchez automatiquement des appels d'offres, avis g\xe9n\xe9raux et accords-cadres"})]}),(0,s.jsx)("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-8",children:(0,s.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"search",label:"Recherche",icon:"\uD83D\uDD0D"},{id:"scheduled",label:"Recherches Programm\xe9es",icon:"⏰"},{id:"recommendations",label:"Recommandations",icon:"\uD83D\uDCA1"},{id:"history",label:"Historique",icon:"\uD83D\uDCCB"}].map(e=>(0,s.jsxs)("button",{onClick:()=>y(e.id),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat(b===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,s.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))})}),(0,s.jsxs)("div",{className:"space-y-8",children:["search"===b&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Nouvelle Recherche"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("input",{type:"text",value:e,onChange:e=>r(e.target.value),placeholder:"Entrez vos mots-cl\xe9s (ex: d\xe9veloppement informatique, formation, consultation...)",className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",onKeyPress:e=>"Enter"===e.key&&C()}),(0,s.jsx)("button",{onClick:C,disabled:u||!e.trim(),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Recherche...":"Rechercher"})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-6 mb-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3",children:"\uD83C\uDF10 Sites de Publication des Offres"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-blue-200 dark:border-blue-700",children:[(0,s.jsx)("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"\uD83C\uDFDB️ BOAMP"}),(0,s.jsx)("p",{className:"text-sm text-blue-700 dark:text-blue-300 mb-2",children:"Bulletin Officiel des Annonces de March\xe9s Publics"}),(0,s.jsx)("a",{href:"https://www.boamp.fr",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Visiter le site →"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-green-200 dark:border-green-700",children:[(0,s.jsx)("h4",{className:"font-medium text-green-900 dark:text-green-100 mb-2",children:"⚖️ Legifrance"}),(0,s.jsx)("p",{className:"text-sm text-green-700 dark:text-green-300 mb-2",children:"Journal Officiel et consultations publiques"}),(0,s.jsx)("a",{href:"https://www.legifrance.gouv.fr",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-green-600 dark:text-green-400 hover:underline",children:"Visiter le site →"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-purple-200 dark:border-purple-700",children:[(0,s.jsx)("h4",{className:"font-medium text-purple-900 dark:text-purple-100 mb-2",children:"\uD83C\uDDEA\uD83C\uDDFA European Tenders"}),(0,s.jsx)("p",{className:"text-sm text-purple-700 dark:text-purple-300 mb-2",children:"Appels d'offres europ\xe9ens"}),(0,s.jsx)("a",{href:"https://www.european-tenders.com",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-purple-600 dark:text-purple-400 hover:underline",children:"Visiter le site →"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-orange-200 dark:border-orange-700",children:[(0,s.jsx)("h4",{className:"font-medium text-orange-900 dark:text-orange-100 mb-2",children:"\uD83C\uDF0D J360"}),(0,s.jsx)("p",{className:"text-sm text-orange-700 dark:text-orange-300 mb-2",children:"Plateforme d'opportunit\xe9s internationales"}),(0,s.jsx)("a",{href:"https://www.j360.info",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-orange-600 dark:text-orange-400 hover:underline",children:"Visiter le site →"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-indigo-200 dark:border-indigo-700",children:[(0,s.jsx)("h4",{className:"font-medium text-indigo-900 dark:text-indigo-100 mb-2",children:"\uD83C\uDF0D DevelopmentAid"}),(0,s.jsx)("p",{className:"text-sm text-indigo-700 dark:text-indigo-300 mb-2",children:"Opportunit\xe9s de d\xe9veloppement international et projets"}),(0,s.jsx)("a",{href:"https://www.developmentaid.org/tenders/search",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-indigo-600 dark:text-indigo-400 hover:underline",children:"Visiter le site →"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-teal-200 dark:border-teal-700",children:[(0,s.jsx)("h4",{className:"font-medium text-teal-900 dark:text-teal-100 mb-2",children:"\uD83D\uDCCA BM"}),(0,s.jsx)("p",{className:"text-sm text-teal-700 dark:text-teal-300 mb-2",children:"Banque Mondiale - Appels d'offres"}),(0,s.jsx)("a",{href:"https://www.worldbank.org",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-teal-600 dark:text-teal-400 hover:underline",children:"Visiter le site →"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-red-200 dark:border-red-700",children:[(0,s.jsx)("h4",{className:"font-medium text-red-900 dark:text-red-100 mb-2",children:"\uD83C\uDD98 ReliefWeb"}),(0,s.jsx)("p",{className:"text-sm text-red-700 dark:text-red-300 mb-2",children:"Opportunit\xe9s humanitaires et d'urgence"}),(0,s.jsx)("a",{href:"https://reliefweb.int",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-red-600 dark:text-red-400 hover:underline",children:"Visiter le site →"})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 border border-yellow-200 dark:border-yellow-700",children:[(0,s.jsx)("h4",{className:"font-medium text-yellow-900 dark:text-yellow-100 mb-2",children:"\uD83E\uDD1D Coordination Sud"}),(0,s.jsx)("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mb-2",children:"R\xe9seau des ONG fran\xe7aises"}),(0,s.jsx)("a",{href:"https://www.coordinationsud.org",target:"_blank",rel:"noopener noreferrer",className:"text-xs text-yellow-600 dark:text-yellow-400 hover:underline",children:"Visiter le site →"})]})]})]}),t.length>0?(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-4",children:["R\xe9sultats (",t.length,")"]}),(0,s.jsx)("div",{className:"grid gap-4",children:t.map(e=>(0,s.jsx)(c,{result:e,onValidate:E},e.id))})]}):e.trim()&&(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-8 text-center",children:[(0,s.jsx)("div",{className:"text-gray-400 dark:text-gray-500 mb-4",children:(0,s.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucun r\xe9sultat trouv\xe9"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Aucune offre ne correspond \xe0 vos crit\xe8res de recherche."}),(0,s.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(0,s.jsx)("p",{children:"\uD83D\uDCA1 Conseils de recherche :"}),(0,s.jsxs)("ul",{className:"mt-2 space-y-1",children:[(0,s.jsx)("li",{children:"• Essayez des mots-cl\xe9s plus g\xe9n\xe9raux"}),(0,s.jsx)("li",{children:"• V\xe9rifiez l'orthographe"}),(0,s.jsx)("li",{children:"• Utilisez des synonymes"})]})]})]})]}),"scheduled"===b&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Recherches Programm\xe9es"}),(0,s.jsxs)("button",{onClick:L,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,s.jsx)("span",{className:"mr-2",children:"➕"}),"Nouvelle Recherche"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,s.jsx)("input",{type:"text",value:k.keywords,onChange:e=>j(r=>({...r,keywords:e.target.value})),placeholder:"Mots-cl\xe9s",className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white"}),(0,s.jsxs)("select",{value:k.frequency,onChange:e=>j(r=>({...r,frequency:e.target.value})),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[(0,s.jsx)("option",{value:"hourly",children:"Toutes les heures"}),(0,s.jsx)("option",{value:"daily",children:"Quotidienne"}),(0,s.jsx)("option",{value:"weekly",children:"Hebdomadaire"}),(0,s.jsx)("option",{value:"monthly",children:"Mensuelle"}),(0,s.jsx)("option",{value:"custom",children:"Personnalis\xe9e"})]}),(0,s.jsxs)("select",{value:k.period,onChange:e=>j(r=>({...r,period:e.target.value})),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white",children:[(0,s.jsx)("option",{value:"all",children:"Toutes les p\xe9riodes"}),(0,s.jsx)("option",{value:"today",children:"Aujourd'hui"}),(0,s.jsx)("option",{value:"week",children:"Cette semaine"}),(0,s.jsx)("option",{value:"month",children:"Ce mois"}),(0,s.jsx)("option",{value:"quarter",children:"Ce trimestre"}),(0,s.jsx)("option",{value:"year",children:"Cette ann\xe9e"}),(0,s.jsx)("option",{value:"custom",children:"P\xe9riode personnalis\xe9e"})]}),(0,s.jsx)("button",{onClick:R,disabled:!k.keywords.trim(),className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Ajouter"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Recherches Programm\xe9es Actives"}),(0,s.jsx)("div",{className:"grid gap-4",children:g.length>0?g.map(e=>(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-4",children:(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-lg",children:e.keywords}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.is_active?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"),children:e.is_active?"Active":"Inactive"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-medium",children:"Fr\xe9quence:"})," ","hourly"===e.frequency?"Toutes les heures":"daily"===e.frequency?"Quotidienne":"weekly"===e.frequency?"Hebdomadaire":"monthly"===e.frequency?"Mensuelle":"Personnalis\xe9e"]}),(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-medium",children:"P\xe9riode:"})," ","all"===e.period?"Toutes les p\xe9riodes":"today"===e.period?"Aujourd'hui":"week"===e.period?"Cette semaine":"month"===e.period?"Ce mois":"quarter"===e.period?"Ce trimestre":"year"===e.period?"Cette ann\xe9e":"custom"===e.period?"P\xe9riode personnalis\xe9e":"Toutes les p\xe9riodes"]}),e.custom_schedule&&(0,s.jsx)("p",{className:"text-gray-500 dark:text-gray-500 text-xs mt-1",children:"Planning personnalis\xe9 configur\xe9"})]}),(0,s.jsxs)("div",{children:[e.last_run&&(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-medium",children:"Derni\xe8re ex\xe9cution:"}),(0,s.jsx)("br",{}),new Date(e.last_run).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]}),e.next_run&&(0,s.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{className:"font-medium",children:"Prochaine ex\xe9cution:"}),(0,s.jsx)("br",{}),new Date(e.next_run).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 ml-4",children:[(0,s.jsx)("button",{onClick:()=>T(e),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"✏️ Modifier"}),(0,s.jsx)("button",{onClick:()=>_(e),className:"px-3 py-2 rounded-lg transition-colors text-sm ".concat(e.is_active?"bg-orange-600 text-white hover:bg-orange-700":"bg-green-600 text-white hover:bg-green-700"),children:e.is_active?"⏸️ Pause":"▶️ Activer"}),(0,s.jsx)("button",{onClick:()=>I(e.keywords),className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"\uD83D\uDDD1️ Supprimer"})]})]})},e.id)):(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-8 text-center",children:[(0,s.jsx)("div",{className:"text-gray-400 dark:text-gray-500 mb-4",children:(0,s.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucune recherche programm\xe9e"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Cr\xe9ez votre premi\xe8re recherche programm\xe9e pour automatiser la veille d'opportunit\xe9s."}),(0,s.jsx)("button",{onClick:L,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Cr\xe9er une recherche programm\xe9e"})]})})]})]}),"recommendations"===b&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold",children:"Recommandations Personnalis\xe9es"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Offres recommand\xe9es bas\xe9es sur vos validations pr\xe9c\xe9dentes"})]}),(0,s.jsx)("button",{onClick:O,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"\uD83D\uDD04 Actualiser"})]}),x.length>0?(0,s.jsx)("div",{className:"grid gap-4",children:x.map(e=>(0,s.jsx)(c,{result:e,onValidate:E,showSimilarity:!0},e.id))}):(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-800 rounded-lg p-8 text-center",children:[(0,s.jsx)("div",{className:"text-gray-400 dark:text-gray-500 mb-4",children:(0,s.jsx)("svg",{className:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Aucune recommandation disponible"}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Commencez par valider quelques offres pour recevoir des recommandations personnalis\xe9es."})]})]}),"history"===b&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Historique des Recherches"}),(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"L'historique d\xe9taill\xe9 de vos recherches sera bient\xf4t disponible."})})]})]})]}),N&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:D?"Modifier la Recherche Programm\xe9e":"Nouvelle Recherche Programm\xe9e"}),(0,s.jsx)("button",{onClick:q,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,s.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mots-cl\xe9s de recherche"}),(0,s.jsx)("input",{type:"text",value:k.keywords,onChange:e=>j(r=>({...r,keywords:e.target.value})),placeholder:"Ex: construction, informatique, services...",className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white text-lg"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"D\xe9crivez pr\xe9cis\xe9ment les opportunit\xe9s que vous recherchez"})]}),(0,s.jsx)(i,{keywords:k.keywords,frequency:k.frequency,customSchedule:k.customSchedule,period:k.period,onFrequencyChange:e=>j(r=>({...r,frequency:e})),onCustomScheduleChange:e=>j(r=>({...r,customSchedule:e})),onPeriodChange:e=>j(r=>({...r,period:e})),onSave:()=>{if(!k.keywords.trim())return void alert("Veuillez saisir des mots-cl\xe9s pour la recherche programm\xe9e.");D?P():R()},onCancel:q})]})})})]})})}function c(e){var r;let{result:t,onValidate:l,showSimilarity:o=!1}=e,[n,i]=(0,a.useState)(!1),d=(r=t.source,t.sourceIcon?{icon:t.sourceIcon,color:"bg-blue-100 text-blue-800",name:t.source||r}:({BOAMP:{icon:"\uD83C\uDFDB️",color:"bg-blue-100 text-blue-800",name:"BOAMP - Bulletin Officiel des Annonces de March\xe9s Publics"},Legifrance:{icon:"⚖️",color:"bg-green-100 text-green-800",name:"Legifrance - Journal Officiel"},"European Tenders":{icon:"\uD83C\uDDEA\uD83C\uDDFA",color:"bg-purple-100 text-purple-800",name:"European Tenders"},J360:{icon:"\uD83C\uDF0D",color:"bg-orange-100 text-orange-800",name:"J360 - Plateforme d'opportunit\xe9s internationales"},DevelopmentAid:{icon:"\uD83C\uDF0D",color:"bg-indigo-100 text-indigo-800",name:"DevelopmentAid - Opportunit\xe9s de d\xe9veloppement international"},BM:{icon:"\uD83D\uDCCA",color:"bg-teal-100 text-teal-800",name:"Banque Mondiale - Appels d'offres"},ReliefWeb:{icon:"\uD83C\uDD98",color:"bg-red-100 text-red-800",name:"ReliefWeb - Opportunit\xe9s humanitaires"},"Coordination Sud":{icon:"\uD83E\uDD1D",color:"bg-yellow-100 text-yellow-800",name:"Coordination Sud - R\xe9seau des ONG fran\xe7aises"},"Innovation France":{icon:"\uD83D\uDE80",color:"bg-orange-100 text-orange-800",name:"Innovation France"},"Consultations Publiques":{icon:"\uD83D\uDCCB",color:"bg-indigo-100 text-indigo-800",name:"Consultations Publiques"},Google:{icon:"\uD83D\uDD0D",color:"bg-gray-100 text-gray-800",name:"Google Search"},Bing:{icon:"\uD83D\uDD0D",color:"bg-gray-100 text-gray-800",name:"Bing Search"}})[r]||{icon:"\uD83D\uDCC4",color:"bg-gray-100 text-gray-800",name:r});return(0,s.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:(0,s.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:t.title}),(0,s.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-3",children:t.description}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400 mb-3",children:[(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(d.color),children:[d.icon," ",t.source]}),(0,s.jsxs)("span",{children:["\uD83D\uDCC5 ",new Date(t.date).toLocaleDateString("fr-FR")]}),t.relevance&&(0,s.jsxs)("span",{children:["\uD83C\uDFAF Pertinence: ",(100*t.relevance).toFixed(1),"%"]}),t.estimated_value&&(0,s.jsxs)("span",{children:["\uD83D\uDCB0 Valeur estim\xe9e: ",t.estimated_value.toLocaleString("fr-FR")," €"]}),t.deadline&&(0,s.jsxs)("span",{children:["⏰ \xc9ch\xe9ance: ",new Date(t.deadline).toLocaleDateString("fr-FR")]}),t.location&&(0,s.jsxs)("span",{children:["\uD83D\uDCCD Localisation: ",t.location]}),t.category&&(0,s.jsxs)("span",{children:["\uD83C\uDFF7️ Cat\xe9gorie: ",t.category]}),t.validation_count&&(0,s.jsxs)("span",{children:["✅ Validations: ",t.validation_count]}),o&&t.similarity_score&&(0,s.jsxs)("span",{children:["\uD83C\uDFAF Similarit\xe9: ",(100*t.similarity_score).toFixed(1),"%"]})]}),(0,s.jsx)("div",{className:"mb-3",children:(0,s.jsxs)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:["\uD83D\uDD17 Consulter l'offre sur ",t.source,(0,s.jsx)("svg",{className:"ml-2 w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})}),(0,s.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-3 mb-3",children:[(0,s.jsxs)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["\uD83D\uDCCB Site de publication: ",d.name]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 dark:text-gray-400",children:["Cette offre a \xe9t\xe9 publi\xe9e sur ",t.source,". Cliquez sur le bouton ci-dessus pour la consulter directement sur le site officiel."]})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("button",{onClick:()=>i(!n),className:"p-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"⋮"}),n&&(0,s.jsx)("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-700 rounded-md shadow-lg z-10",children:(0,s.jsxs)("div",{className:"py-1",children:[(0,s.jsx)("button",{onClick:()=>{l(t.id,"en_cours"),i(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600",children:"✅ Valider (En cours)"}),(0,s.jsx)("button",{onClick:()=>{l(t.id,"depose"),i(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600",children:"\uD83D\uDCE4 Valider (D\xe9pos\xe9)"}),(0,s.jsx)("button",{onClick:()=>{l(t.id,"gagne"),i(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600",children:"\uD83C\uDFC6 Valider (Gagn\xe9)"}),(0,s.jsx)("button",{onClick:()=>{l(t.id,"perdu"),i(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600",children:"❌ Valider (Perdu)"}),(0,s.jsx)("div",{className:"border-t border-gray-200 dark:border-gray-600 my-1"}),(0,s.jsx)("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600",children:"\uD83D\uDD17 Ouvrir le lien"}),(0,s.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t.url),i(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-600",children:"\uD83D\uDCCB Copier le lien"})]})})]})]})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[255,458,530,347,870,358],()=>r(63678)),_N_E=e.O()}]);