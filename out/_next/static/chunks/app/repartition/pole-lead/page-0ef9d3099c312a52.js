(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[420],{150:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var r=s(73365),l=s(59534),i=s.n(l);function a(e){let{className:t="",variant:s="default",size:l="md"}=e,a="".concat("inline-flex items-center gap-2 font-medium transition-all duration-200 hover:scale-105"," ").concat({default:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow-sm hover:shadow-md",outline:"border-2 border-blue-600 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-600 hover:text-white",icon:"bg-blue-100 text-blue-600 p-2 rounded-lg hover:bg-blue-200"}[s]," ").concat({sm:"text-sm px-3 py-1.5",md:"text-base px-4 py-2",lg:"text-lg px-6 py-3"}[l]," ").concat(t);return(0,r.jsxs)(i(),{href:"/",className:a,children:[(0,r.jsx)("i",{className:"ri-home-line"}),"icon"!==s&&(0,r.jsx)("span",{children:"Accueil"})]})}},6878:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>m});var r=s(73365),l=s(59534),i=s.n(l),a=s(1521);function n(e){let{className:t=""}=e;return(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 ".concat(t),children:[(0,r.jsxs)(i(),{href:"/repartition",className:"inline-flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 shadow-sm hover:shadow-md transition-all duration-200 hover:scale-105 font-medium",children:[(0,r.jsx)("i",{className:"ri-arrow-left-line"}),"Retour \xe0 la page r\xe9partition des offres"]}),(0,r.jsxs)(i(),{href:"/repartition/vue-repetitions",className:"inline-flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 shadow-sm hover:shadow-md transition-all duration-200 hover:scale-105 font-medium",children:[(0,r.jsx)("i",{className:"ri-eye-line"}),"Vue des r\xe9partitions"]})]})}var o=s(150),d=s(84857),c=s(98809);function m(){return(0,r.jsx)(d.default,{children:(0,r.jsx)(x,{})})}function x(){let[e,t]=(0,a.useState)({}),s=[{name:"P\xf4le sant\xe9",icon:"ri-heart-pulse-line",description:"Gestion des offres li\xe9es au secteur de la sant\xe9",color:"bg-red-100 text-red-600 border-red-200",href:"/repartition/pole-lead/P\xf4le sant\xe9"},{name:"P\xf4le Wash",icon:"ri-drop-line",description:"Gestion des offres li\xe9es \xe0 l'eau, assainissement et hygi\xe8ne",color:"bg-blue-100 text-blue-600 border-blue-200",href:"/repartition/pole-lead/P\xf4le Wash"},{name:"P\xf4le Education",icon:"ri-book-open-line",description:"Gestion des offres li\xe9es au secteur \xe9ducatif",color:"bg-green-100 text-green-600 border-green-200",href:"/repartition/pole-lead/P\xf4le Education"},{name:"P\xf4le Climat",icon:"ri-global-line",description:"Gestion des offres li\xe9es au changement climatique",color:"bg-emerald-100 text-emerald-600 border-emerald-200",href:"/repartition/pole-lead/P\xf4le Climat"},{name:"P\xf4le Enqu\xeates",icon:"ri-bar-chart-line",description:"Gestion des offres li\xe9es aux \xe9tudes et enqu\xeates",color:"bg-purple-100 text-purple-600 border-purple-200",href:"/repartition/pole-lead/P\xf4le Enqu\xeates"},{name:"P\xf4le Mod\xe9lisation",icon:"ri-microscope-line",description:"Gestion des offres li\xe9es \xe0 la mod\xe9lisation et simulation",color:"bg-indigo-100 text-indigo-600 border-indigo-200",href:"/repartition/pole-lead/P\xf4le Mod\xe9lisation"},{name:"P\xf4le Finances Publiques",icon:"ri-money-dollar-circle-line",description:"Gestion des offres li\xe9es aux finances publiques",color:"bg-yellow-100 text-yellow-600 border-yellow-200",href:"/repartition/pole-lead/P\xf4le Finances Publiques"},{name:"P\xf4le D\xe9centralisation",icon:"ri-building-line",description:"Gestion des offres li\xe9es \xe0 la d\xe9centralisation",color:"bg-orange-100 text-orange-600 border-orange-200",href:"/repartition/pole-lead/P\xf4le D\xe9centralisation"},{name:"P\xf4le Coh\xe9sion sociale",icon:"ri-team-line",description:"Gestion des offres li\xe9es \xe0 la coh\xe9sion sociale et au d\xe9veloppement communautaire",color:"bg-pink-100 text-pink-600 border-pink-200",href:"/repartition/pole-lead/P\xf4le Coh\xe9sion sociale"},{name:"P\xf4le Anglophone",icon:"ri-translate-2",description:"Gestion des offres pour les pays anglophones",color:"bg-gray-100 text-gray-600 border-gray-200",href:"/repartition/pole-lead/P\xf4le Anglophone"},{name:"P\xf4le SIDIA",icon:"ri-settings-3-line",description:"Gestion des offres li\xe9es au SIDIA",color:"bg-teal-100 text-teal-600 border-teal-200",href:"/repartition/pole-lead/P\xf4le SIDIA"},{name:"Montage Administrative",icon:"ri-clipboard-line",description:"Gestion administrative des montages de projets",color:"bg-cyan-100 text-cyan-600 border-cyan-200",href:"/repartition/pole-lead/Montage Administrative"}];return(0,a.useEffect)(()=>{try{let e=localStorage.getItem("offres");if(e){let r=JSON.parse(e),l={};s.forEach(e=>{l[e.name]=r.filter(t=>t.poleLead===e.name&&"approuv\xe9e"===t.statut).length}),t(l)}}catch(e){console.error("Erreur lors du comptage des offres:",e)}},[]),(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-white",children:[(0,r.jsx)(c.A,{}),(0,r.jsx)("nav",{className:"bg-white/90 backdrop-blur-sm border-b border-blue-100 sticky top-0 z-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i(),{href:"/",children:(0,r.jsx)("img",{src:"https://static.readdy.ai/image/36ce116ccdb0d05752a287dd792317ce/3a2cd734c9129790560cc32a9975e166.jfif",alt:"BMS Logo",className:"h-8 mr-3"})}),(0,r.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"Gestion des P\xf4les"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(o.default,{variant:"outline",size:"sm"}),(0,r.jsx)(i(),{href:"/dashboard",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Dashboard"}),(0,r.jsx)(i(),{href:"/repartition",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"R\xe9partition"})]})]})})}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-800 py-12",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"text-center text-white",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-blue-500/30 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("i",{className:"ri-building-line text-2xl"})}),(0,r.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Gestion des P\xf4les"}),(0,r.jsx)("p",{className:"text-xl opacity-90 mb-6",children:"S\xe9lectionnez un p\xf4le pour voir les offres associ\xe9es"}),(0,r.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg px-4 py-2 inline-block",children:(0,r.jsxs)("span",{className:"text-lg",children:[s.length," p\xf4les disponibles"]})})]})})}),(0,r.jsxs)("div",{className:"max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)(n,{})}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:s.map(t=>(0,r.jsx)(i(),{href:t.href,className:"group bg-white rounded-2xl shadow-lg border border-gray-200 p-6 hover:shadow-xl transition-all duration-300 hover:-translate-y-1",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center border-2 ".concat(t.color),children:(0,r.jsx)("i",{className:"".concat(t.icon," text-2xl")})}),(0,r.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:t.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:t.description}),(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 bg-gray-100 text-gray-700 px-3 py-1 rounded-full text-sm font-medium",children:[(0,r.jsx)("i",{className:"ri-file-list-line"}),(0,r.jsxs)("span",{children:[e[t.name]||0," offre",1!==e[t.name]?"s":""]})]})]})},t.name))}),(0,r.jsxs)("div",{className:"mt-12 bg-white rounded-2xl shadow-lg border border-gray-200 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Statistiques des p\xf4les"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:Object.values(e).reduce((e,t)=>e+t,0)}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total des offres"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-green-600",children:Object.values(e).filter(e=>e>0).length}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"P\xf4les actifs"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-3xl font-bold text-orange-600",children:Math.max(...Object.values(e),0)}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Plus grand p\xf4le"})]})]})]})]})]})}},43703:(e,t,s)=>{Promise.resolve().then(s.bind(s,6878))},84857:(e,t,s)=>{"use strict";s.d(t,{default:()=>a});var r=s(73365),l=s(49458),i=s(98809);function a(e){let{children:t}=e;return(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[(0,r.jsx)(l.A,{}),(0,r.jsxs)("main",{className:"flex-1 overflow-auto md:ml-72 transition-all duration-300",children:[(0,r.jsx)(i.A,{}),(0,r.jsx)("div",{className:"min-h-full",children:t})]})]})}},98809:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(73365),l=s(1521),i=s(99789);let a=e=>{let{className:t=""}=e,{alerts:s,isVisible:a,toggleAlerts:n,closeAlert:o}=(0,i.Z)(),[d,c]=(0,l.useState)(!1);return((0,l.useEffect)(()=>{c(!0)},[]),d&&a&&0!==s.length)?(0,r.jsxs)("div",{className:"fixed top-0 left-0 right-0 z-50 ".concat(t),children:[(0,r.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,r.jsx)("button",{onClick:n,className:"bg-gray-800 text-white px-3 py-1 rounded-full text-xs hover:bg-gray-700 transition-colors",title:"Masquer les alertes",children:"✕"})}),(0,r.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-red-600 text-white p-4 shadow-lg",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{className:"text-xl",children:"⚠️"}),(0,r.jsxs)("h3",{className:"font-semibold text-lg",children:["Alertes d'\xe9ch\xe9ances (",s.length,")"]})]}),(0,r.jsxs)("div",{className:"text-sm opacity-90",children:["Derni\xe8re mise \xe0 jour : ",new Date().toLocaleTimeString("fr-FR")]})]}),(0,r.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg border-l-4 ".concat(e.isExpired?"bg-red-800 border-red-400 animate-pulse":e.isUrgent?"bg-red-600 border-red-300 animate-pulse":"bg-orange-600 border-orange-300"),children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)("span",{className:"font-semibold",children:e.title}),e.isUrgent&&(0,r.jsx)("span",{className:"bg-red-400 text-red-900 px-2 py-1 rounded-full text-xs font-bold",children:"URGENT"}),e.isExpired&&(0,r.jsx)("span",{className:"bg-red-400 text-red-900 px-2 py-1 rounded-full text-xs font-bold",children:"EXPIR\xc9"})]}),(0,r.jsx)("p",{className:"text-sm opacity-90 mb-1",children:e.message}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,r.jsx)("span",{className:"font-mono bg-black/20 px-2 py-1 rounded",children:e.timeRemaining}),e.offreTitle&&(0,r.jsxs)("span",{className:"opacity-75",children:["Offre: ",e.offreTitle]})]})]}),(0,r.jsx)("button",{onClick:()=>o(e.id),className:"ml-4 text-white/80 hover:text-white transition-colors",title:"Fermer cette alerte",children:"✕"})]},e.id))})]})})]}):null}},99789:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var r=s(1521);let l={montageAlertHours:72,depotAlertHours:24,timezone:"UTC"},i=()=>{let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(l),[a,n]=(0,r.useState)(!0),[o,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{d(!0)},[]),(0,r.useEffect)(()=>{if(!o)return;let e=localStorage.getItem("alertSettings");if(e)try{let t=JSON.parse(e);i(t)}catch(e){console.error("Erreur lors du chargement des param\xe8tres d'alerte:",e),i(l),localStorage.setItem("alertSettings",JSON.stringify(l))}else i(l),localStorage.setItem("alertSettings",JSON.stringify(l))},[o]);let c=(0,r.useCallback)(e=>{i(e),localStorage.setItem("alertSettings",JSON.stringify(e))},[]),m=(0,r.useCallback)(e=>{let t=new Date,s=e.getTime()-t.getTime();if(s<=0)return"\xc9ch\xe9ance d\xe9pass\xe9e";let r=Math.floor(s/36e5),l=Math.floor(s%36e5/6e4);if(r>24){let e=Math.floor(r/24);return"".concat(e,"j ").concat(r%24,"h ").concat(l,"m")}return"".concat(r,"h ").concat(l,"m")},[]),x=(0,r.useCallback)((e,t)=>{let s=new Date,r=(e.getTime()-s.getTime())/36e5;return r>0&&r<=t},[]),u=(0,r.useCallback)(e=>{let t=new Date;return e.getTime()<=t.getTime()},[]),g=(0,r.useCallback)(e=>{let t=new Date,s=(e.getTime()-t.getTime())/36e5;return s>0&&s<=2},[]),f=(0,r.useCallback)(()=>{if(o)try{let e=localStorage.getItem("offres");if(!e)return void t([]);let r=JSON.parse(e),l=[];r.forEach(e=>{if(e.delaiTransmissionMontageAdministratif){let t=new Date(e.delaiTransmissionMontageAdministratif);x(t,s.montageAlertHours)&&l.push({id:"montage-".concat(e.id),type:g(t)?"error":"warning",title:"Montage Administratif",message:"\xc9ch\xe9ance pour le montage administratif de l'offre \"".concat(e.intituleOffre,'"'),timeRemaining:m(t),offreId:e.id,offreTitle:e.intituleOffre,isUrgent:g(t),isExpired:u(t)})}if(e.dateDepotPrevu){let t=new Date(e.dateDepotPrevu);x(t,s.depotAlertHours)&&l.push({id:"depot-".concat(e.id),type:g(t)?"error":"warning",title:"D\xe9p\xf4t d'Offre",message:"\xc9ch\xe9ance pour le d\xe9p\xf4t de l'offre \"".concat(e.intituleOffre,'"'),timeRemaining:m(t),offreId:e.id,offreTitle:e.intituleOffre,isUrgent:g(t),isExpired:u(t)})}}),l.sort((e,t)=>e.isUrgent&&!t.isUrgent?-1:!e.isUrgent&&t.isUrgent?1:0),t(l)}catch(e){console.error("Erreur lors de la g\xe9n\xe9ration des alertes:",e),t([])}},[s,m,x,u,g,o]);(0,r.useEffect)(()=>{if(!o)return;f();let e=setInterval(()=>{f()},6e4),t=()=>{f()},s=e=>{("offres"===e.key||"alertSettings"===e.key)&&f()};return window.addEventListener("alertSettingsChanged",t),window.addEventListener("storage",s),()=>{clearInterval(e),window.removeEventListener("alertSettingsChanged",t),window.removeEventListener("storage",s)}},[f,o]);let h=(0,r.useCallback)(()=>{n(!a)},[a]);return{alerts:e,settings:s,isVisible:a,saveSettings:c,toggleAlerts:h,closeAlert:(0,r.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),generateAlerts:f}}}},e=>{var t=t=>e(e.s=t);e.O(0,[255,458,347,870,358],()=>t(43703)),_N_E=e.O()}]);